<!DOCTYPE html>
<html prefix="        og: http://ogp.me/ns# article: http://ogp.me/ns/article#     " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Java Testing | Bits of Experience</title>
<link href="https://fonts.googleapis.com/css?family=Bitter:400,400i,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://marcohassan.github.io/bits-of-experience/posts/java-testing/">
<!--[if lt IE 9]><script src="../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><meta name="author" content="Marco Hassan">
<link rel="prev" href="../front-end-stories/" title="Front-End Stories" type="text/html">
<meta property="og:site_name" content="Bits of Experience">
<meta property="og:title" content="Java Testing">
<meta property="og:url" content="https://marcohassan.github.io/bits-of-experience/posts/java-testing/">
<meta property="og:description" content="So I am starting to deliver some solutions on some minor features on
some applications.



There was quite a bit of work to be done in the last couple of
months. I mean I had to get up and running wit">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2022-01-27T16:20:12+01:00">
<meta property="article:tag" content="java">
<meta property="article:tag" content="testing">
</head>
<body>
    <a href="#page-content" class="sr-only sr-only-focusable">Skip to main content</a>
    
    <section class="social"><ul>
<li><a href="../../pages/aboutme/" title="About me"><i class="fa fa-user-circle"></i></a></li>
            <li><a href="../../pages/bits-of-experience-a-readable-view-on-my-study-adventures/" title="Home"><i class="fa fa-home"></i></a></li>
            <li><a href="../../index.html" title="Blog"><i class="fa fa-edit"></i></a></li>
            <li><a href="../../pages/emacs/" title="A life Configuring Emacs"><i class="fa fa-code"></i></a></li>
            <li><a href="../../pages/papers/" title="Term and Research Papers"><i class="fa fa-university"></i></a></li>
            <li><a href="../../pages/foto-blog/" title="Foto Blog"><i class="fa fa-camera-retro"></i></a></li>
            <li><a href="https://github.com/MarcoHassan" title="My Github"><i class="fab fa-github"></i></a></li>
            <li><a href="https://stackoverflow.com/users/9731177/mhass" title="My Stack"><i class="fab fa-stack-overflow"></i></a></li>
            <li><a href="../../rss.xml" title="RSS"><i class="fa fa-rss"></i></a></li>
            <li><a href="../../categories/index.html" title="Tags"><i class="fa fa-tags"></i></a></li>
    
    

        </ul></section><section class="page-content"><div class="content" rel="main">
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Java Testing</a></h1>

        <div class="metadata">
            <p class="dateline"><a href="." rel="bookmark"><i class="fa fa-clock"></i> <time class="published dt-published" datetime="2022-01-27T16:20:12+01:00" itemprop="datePublished" title="2022-01-27 16:20">2022-01-27 16:20</time></a></p>
            <p class="byline author vcard"> <i class="fa fa-user"></i> <span class="byline-name fn" itemprop="author">
                    Marco Hassan
            </span></p>
            
        <p class="sourceline"><a href="index.org" class="sourcelink"><i class="fa fa-file-code"></i> Source</a></p>

            

            
    <div class="tags">
<h3 class="metadata-title">
<i class="fa fa-tags"></i> Tags:</h3>
        <ul itemprop="keywords" class="tags-ul">
<li><a class="tag p-category" href="../../categories/java/" rel="tag">java</a></li>
            <li><a class="tag p-category" href="../../categories/testing/" rel="tag">testing</a></li>
        </ul>
</div>

        </div>
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>
So I am starting to deliver some solutions on some minor features on
some applications.
</p>

<p>
There was quite a bit of work to be done in the last couple of
months. I mean I had to get up and running with Java, reverse engineer
some bit of application, write documentation etc. I am slowly getting
up to speed. I have still quite a few things on my mind and I guess
that to reach the point where I would like to be it will be another
6-12 months but I am moving at a <i>decent</i> speed so that I am not
complaining too much.
</p>

<p>
The structure and challenges of the job gets clearer everyday so that
is fine - now it is a question of adapting and working strategically
to overcome the various issues.
</p>

<p>
The next bit that is on the list is about testing. This post deals
with it. I am ready to get up and running with it and start to write
well-covered software. In a further step you can then imagine some
further integration with tools as <a href="https://en.wikipedia.org/wiki/SonarQube">sonarqube</a> etc.
</p>

<!-- TEASER_END -->

<div id="outline-container-org160746d" class="outline-2">
<h2 id="org160746d">Testing</h2>
<div class="outline-text-2" id="text-org160746d">
<p>
So basically I am starting to dig in the testing bit.
</p>

<p>
Always recall the essential three kind of tests in the ideal world:
</p>

<ul class="org-ul">
<li>unit testing</li>

<li>integration testing</li>

<li>functional testing</li>
</ul>
<p>
I will start by writing unit tests for my application. I will then
maybe go into the other in time.   
</p>
</div>
</div>

<div id="outline-container-org95564be" class="outline-2">
<h2 id="org95564be">Unit Testing</h2>
<div class="outline-text-2" id="text-org95564be">
</div>
<div id="outline-container-org7aaf4fb" class="outline-4">
<h4 id="org7aaf4fb">Set Up</h4>
<div class="outline-text-4" id="text-org7aaf4fb">
<p>
So essentially I will use the JUnit package for running unit
tests.
</p>

<p>
First of all include it in your gradle dependencies
</p>

<div class="highlight"><pre><span></span>    dependencies {

      ...

      testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'

      ...
    }
</pre></div>

<p>
Then basically you are good to go.
</p>

<p>
Note that I work with gradle. Note that there you essentially have
the default that your tests should lie in the <code>src/test/java</code>
directory.
</p>

<p>
So essentially when working in Eclipse you can start by creating a
source-folder (meaning folder containing source code) respecting
this convention <code>src/test/java</code>.
</p>

<p>
Then from there you can go on by creating <code>JUnit Test</code> Cases. Note
that in Eclipse everything is pretty much embedded. So everything
goes through the UI. In this sense you click on the <code>src/test/java</code>
source file and from there you create a new JUnit test. There you
have to specify the package you want to work on, say
<code>com.zurich.im.b1.feeds.model</code>.
</p>

<p>
Then you can specify the class in that package that you want to
test. Finally you declare your test file with the following naming
convention <code>&lt;MyClass&gt;Test</code>.
</p>

<p>
You are done then, bu as soon as you will manage to fix your issues with
emacs start to migrate as that is a much more powerful tool.
</p>
</div>
</div>


<div id="outline-container-org1589376" class="outline-4">
<h4 id="org1589376">Actually Testing</h4>
<div class="outline-text-4" id="text-org1589376">
<p>
This is then straightforward. You can read and refer a bit to the
<a href="https://junit.org/junit5/docs/current/user-guide/">following documentation</a>.
</p>

<p>
So first thing you have to understand:
</p>

<blockquote>
<p>
JUnit 5 = JUnit Platform + JUnit Jupiter + JUnit Vintage
</p>
</blockquote>

<p>
So what are the three:
</p>

<ul class="org-ul">
<li>
<code>JUnit Platform</code>: it is the actual platform for running your
tests. This is used by the different clients - be a process from
your shell, the one embedded in your Eclipse IDE etc.</li>

<li>
<code>JUnit Jupiter</code>: This module includes new programming and
extension models for writing tests in JUnit 5. You have new
annotators etc.</li>

<li>
<code>JUnit Jupiter</code>: This is for running JUnit 3 and JUnit 4 based
tests on the platform.</li>
</ul>
<p>
So we will now focus on <code>JUnit Jupiter</code> as that is the actually
coding part for writing your tests. You will then check with the
time at the rest - if you will check at them at all… just need
to decide on how to connect to the <code>JUnit Platform</code>… for now use
the Eclipse IDE… there everything is more less embedded. Move
then to Emacs with time.
</p>
</div>
</div>


<div id="outline-container-orge23c4fb" class="outline-4">
<h4 id="orge23c4fb">Test Classes And Method</h4>
<div class="outline-text-4" id="text-orge23c4fb">
<p>
What are the first-class citizens. 
</p>

<ul class="org-ul">
<li>
<code>Test Class</code>  this is a top-level class, static member class or
<code>@Nested</code> class that contains at least 1 test method.</li>

<li>
<code>Test Method</code> any instance method that is directly annotated or
meta-annotated with <code>@Test, @RepeatedTest, @ParameterizedTest,
      @TestFactory, or @TestTemplate</code>
</li>

<li>
<code>Lifecycle Method</code> any method that is directly annotated or
meta-annotated with <code>@BeforeAll, @AfterAll, @BeforeEach, or
      @AfterEach</code>.</li>
</ul>
<p>
So that is nothing new. Trivial I would say it is just setting
naming conv.
</p>

<p>
Note that <code>Test Method</code> and <code>Lifecycle Method</code> does not have to
return any value.
</p>

<p>
The only <b>exception</b> are <code>@TestFactory</code> methods where you are
required to return a value.
</p>
</div>
</div>


<div id="outline-container-orgbb5ecca" class="outline-4">
<h4 id="orgbb5ecca">JUnit Jupiter</h4>
<div class="outline-text-4" id="text-orgbb5ecca">
<p>
Basically in order to understand well how to write tests in Java
understand on the one hand the following annotators through which
it is possible to specify the general logic of your tests and on
the other hand the possible assertions treated in the <a href="#orgc33bca0">next
section</a>. Also recall about <a href="#org0ee3d30">Assumptions</a>.
</p>
</div>

<ul class="org-ul">
<li>
<a id="orgf0a5d2f"></a>@Test<br><div class="outline-text-5" id="text-orgf0a5d2f">
<p>
Denotes that a method is a test method. 
</p>
</div>
</li>

<li>
<a id="orgd3ae568"></a>@ParameterizedTest<br><div class="outline-text-5" id="text-orgd3ae568">
<p>
Denotes that a method is a parameterized test. Such methods are
inherited unless they are overridden.
</p>
</div>
</li>

<li>
<a id="org3c3131c"></a>@RepeatedTest<br><div class="outline-text-5" id="text-org3c3131c">
<p>
Denotes that a method is a test template for a repeated test. Such
methods are inherited unless they are overridden.
</p>
</div>
</li>

<li>
<a id="org6401ea6"></a>@TestFactory<br><div class="outline-text-5" id="text-org6401ea6">
<p>
Denotes that a method is a test factory for dynamic tests. Such
methods are inherited unless they are overridden. 
</p>
</div>
</li>


<li>
<a id="org626c31d"></a>@TestTemplate<br><div class="outline-text-5" id="text-org626c31d">
<p>
Denotes that a method is a template for test cases designed to be
invoked multiple times depending on the number of invocation contexts
returned by the registered providers. Such methods are inherited
unless they are overridden. 
</p>
</div>
</li>

<li>
<a id="orgda05730"></a>@TestClassOrder<br><div class="outline-text-5" id="text-orgda05730">
<p>
Used to configure the test class execution order for @Nested test
classes in the annotated test class. Such annotations are inherited.
</p>
</div>
</li>

<li>
<a id="org643bc49"></a>@TestMethodOrder<br><div class="outline-text-5" id="text-org643bc49">
<p>
Used to configure the test method execution order for the annotated
test class; similar to JUnit 4’s @FixMethodOrder. Such annotations are
inherited. 
</p>
</div>
</li>


<li>
<a id="org141ce27"></a>@Disabled<br><div class="outline-text-5" id="text-org141ce27">
<p>
Used to disable a test class or test method; analogous to JUnit 4’s
@Ignore. Such annotations are not inherited. 
</p>
</div>
</li>

<li>
<a id="org9fcd915"></a>@Timeout<br><div class="outline-text-5" id="text-org9fcd915">
<p>
Used to fail a test, test factory, test template, or lifecycle method
if its execution exceeds a given duration. Such annotations are
inherited. 
</p>
</div>
</li>

<li>
<a id="org27ab824"></a>@ExtendWith<br><div class="outline-text-5" id="text-org27ab824">
<p>
Used to register extensions declaratively. Such annotations are
inherited. 
</p>
</div>
</li>

<li>
<a id="org7eaa4da"></a>@RegisterExtension<br><div class="outline-text-5" id="text-org7eaa4da">
<p>
Used to register extensions programmatically via fields. Such fields
are inherited unless they are shadowed. 
</p>
</div>
</li>

<li>
<a id="org7e0d8e4"></a>@TempDir<br><div class="outline-text-5" id="text-org7e0d8e4">
<p>
Used to supply a temporary directory via field injection or parameter
injection in a lifecycle method or test method; located in the
org.junit.jupiter.api.io package. 
</p>
</div>
</li>










<li>
<a id="org7ec3d5e"></a>Tagging<br><ul class="org-ul">
<li>
<a id="org4ba7a6a"></a>@Tag<br><div class="outline-text-6" id="text-org4ba7a6a">
<p>
Test classes and methods can be tagged via the @Tag
annotation. Those tags can later be used to filter test discovery
and execution.
</p>

<p>
Such annotations are inherited at the class level but not at the
method level. 
</p>
</div>
</li>
</ul>
</li>


<li>
<a id="orgf14e662"></a>Naming and UI Style Annotations<br><div class="outline-text-5" id="text-orgf14e662">
<p>
This are used for setting the naming of your test methods.
</p>

<p>
You can set naming through such annotators and organize
everything in such a way the standard output of running the
tests. That will be required in order to keep order when things
will grow large.
</p>

<p>
Consider the following good example:
</p>

<div class="highlight"><pre><span></span>     <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.DisplayName</span><span class="p">;</span>
     <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.DisplayNameGeneration</span><span class="p">;</span>
     <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.DisplayNameGenerator</span><span class="p">;</span>
     <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.IndicativeSentencesGeneration</span><span class="p">;</span>
     <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Nested</span><span class="p">;</span>
     <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="p">;</span>
     <span class="kn">import</span> <span class="nn">org.junit.jupiter.params.ParameterizedTest</span><span class="p">;</span>
     <span class="kn">import</span> <span class="nn">org.junit.jupiter.params.provider.ValueSource</span><span class="p">;</span>

     <span class="kd">class</span> <span class="nc">DisplayNameGeneratorDemo</span> <span class="p">{</span>

	 <span class="nd">@Nested</span>
	 <span class="nd">@DisplayNameGeneration</span><span class="p">(</span><span class="n">DisplayNameGenerator</span><span class="p">.</span><span class="na">ReplaceUnderscores</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
	 <span class="kd">class</span> <span class="nc">A_year_is_not_supported</span> <span class="p">{</span>

	     <span class="nd">@Test</span>
	     <span class="kt">void</span> <span class="nf">if_it_is_zero</span><span class="p">()</span> <span class="p">{</span>
	     <span class="p">}</span>

	     <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">"A negative value for year is not supported by the leap year computation."</span><span class="p">)</span>
	     <span class="nd">@ParameterizedTest</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"For example, year {0} is not supported."</span><span class="p">)</span>
	     <span class="nd">@ValueSource</span><span class="p">(</span><span class="n">ints</span> <span class="o">=</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span> <span class="p">})</span>
	     <span class="kt">void</span> <span class="nf">if_it_is_negative</span><span class="p">(</span><span class="kt">int</span> <span class="n">year</span><span class="p">)</span> <span class="p">{</span>
	     <span class="p">}</span>

	 <span class="p">}</span>

	 <span class="nd">@Nested</span>
	 <span class="nd">@IndicativeSentencesGeneration</span><span class="p">(</span><span class="n">separator</span> <span class="o">=</span> <span class="s">" -&gt; "</span><span class="p">,</span> <span class="n">generator</span> <span class="o">=</span> <span class="n">DisplayNameGenerator</span><span class="p">.</span><span class="na">ReplaceUnderscores</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
	 <span class="kd">class</span> <span class="nc">A_year_is_a_leap_year</span> <span class="p">{</span>

	     <span class="nd">@Test</span>
	     <span class="kt">void</span> <span class="nf">if_it_is_divisible_by_4_but_not_by_100</span><span class="p">()</span> <span class="p">{</span>
	     <span class="p">}</span>

	     <span class="nd">@ParameterizedTest</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Year {0} is a leap year."</span><span class="p">)</span>
	     <span class="nd">@ValueSource</span><span class="p">(</span><span class="n">ints</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">2016</span><span class="p">,</span> <span class="mi">2020</span><span class="p">,</span> <span class="mi">2048</span> <span class="p">})</span>
	     <span class="kt">void</span> <span class="nf">if_it_is_one_of_the_following_years</span><span class="p">(</span><span class="kt">int</span> <span class="n">year</span><span class="p">)</span> <span class="p">{</span>
	     <span class="p">}</span>

	 <span class="p">}</span>

     <span class="p">}</span>
</pre></div>

<p>
So based on the above you can easily infer the following rules.
</p>
</div>

<ul class="org-ul">
<li>
<a id="orgf53ba20"></a>@DisplayName<br><div class="outline-text-6" id="text-orgf53ba20">
<p>
Declares a custom display name for the test class or test method. Such
annotations are not inherited.
</p>

<p>
Note that if such an annotator is not used you will work with
the default method name. See for instance the method
<code>if_it_is_zero</code> and the result as above:
</p>

<blockquote>
<p>
if it is zero() [OK]
</p>
</blockquote>
</div>
</li>

<li>
<a id="orgd6bfc64"></a>@DisplayNameGeneration<br><div class="outline-text-6" id="text-orgd6bfc64">
<p>
Declares a custom display name generator for the test class. Such
annotations are inherited.
</p>

<p>
Sets some general standards for the naming to be returned by the
methods. Nothing too fancy above but see again how the method
<code>if_it_is_zero</code> with underscores was replaced with spaced in
the output in the example above.
</p>
</div>
</li>

<li>
<a id="org534ec70"></a>@IndicativeSentencesGeneration<br><div class="outline-text-6" id="text-org534ec70">
<p>
Sets some standards for displaying the hierarchy. I think this
is especially important / might be especially important.
</p>
</div>
</li>

<li>
<a id="org054e18e"></a>@Nested<br><div class="outline-text-6" id="text-org054e18e">
<p>
This basically creates the hieararchical structure that you will
ultimately see on your GUI. It will help to structure your tests
in a meaningful way in this sense.
</p>

<p>
Denotes that the annotated class is a non-static nested test
class. @BeforeAll and @AfterAll methods cannot be used directly in a
@Nested test class unless the "per-class" test instance lifecycle is
used. Such annotations are not inherited.
</p>
</div>
</li>
</ul>
</li>

<li>
<a id="org2cbf84a"></a>LifeCycle Annotations<br><ul class="org-ul">
<li>
<a id="org0698df6"></a>Tests Lifecycle<br><div class="outline-text-6" id="text-org0698df6">
<p>
In order to proper understand testing lifecycle you can check at
the following 101 test-example.
</p>

<p>
Next you have all of the basics standard types of tests.
</p>

<p>
Basic to understand then how that works. Trivial.
</p>

<div class="highlight"><pre><span></span>      <span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assertions.fail</span><span class="p">;</span>
      <span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assumptions.assumeTrue</span><span class="p">;</span>

      <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.AfterAll</span><span class="p">;</span>
      <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.AfterEach</span><span class="p">;</span>
      <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.BeforeAll</span><span class="p">;</span>
      <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.BeforeEach</span><span class="p">;</span>
      <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Disabled</span><span class="p">;</span>
      <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="p">;</span>

      <span class="kd">class</span> <span class="nc">StandardTests</span> <span class="p">{</span>

	  <span class="nd">@BeforeAll</span>
	  <span class="kd">static</span> <span class="kt">void</span> <span class="nf">initAll</span><span class="p">()</span> <span class="p">{</span>
	  <span class="p">}</span>

	  <span class="nd">@BeforeEach</span>
	  <span class="kt">void</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
	  <span class="p">}</span>

	  <span class="nd">@Test</span>
	  <span class="kt">void</span> <span class="nf">succeedingTest</span><span class="p">()</span> <span class="p">{</span>
	  <span class="p">}</span>

	  <span class="nd">@Test</span>
	  <span class="kt">void</span> <span class="nf">failingTest</span><span class="p">()</span> <span class="p">{</span>
	      <span class="n">fail</span><span class="p">(</span><span class="s">"a failing test"</span><span class="p">);</span>
	  <span class="p">}</span>

	  <span class="nd">@Test</span>
	  <span class="nd">@Disabled</span><span class="p">(</span><span class="s">"for demonstration purposes"</span><span class="p">)</span>
	  <span class="kt">void</span> <span class="nf">skippedTest</span><span class="p">()</span> <span class="p">{</span>
	      <span class="c1">// not executed</span>
	  <span class="p">}</span>

	  <span class="nd">@Test</span>
	  <span class="kt">void</span> <span class="nf">abortedTest</span><span class="p">()</span> <span class="p">{</span>
	      <span class="n">assumeTrue</span><span class="p">(</span><span class="s">"abc"</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">"Z"</span><span class="p">));</span>
	      <span class="n">fail</span><span class="p">(</span><span class="s">"test should have been aborted"</span><span class="p">);</span>
	  <span class="p">}</span>

	  <span class="nd">@AfterEach</span>
	  <span class="kt">void</span> <span class="nf">tearDown</span><span class="p">()</span> <span class="p">{</span>
	  <span class="p">}</span>

	  <span class="nd">@AfterAll</span>
	  <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDownAll</span><span class="p">()</span> <span class="p">{</span>
	  <span class="p">}</span>

      <span class="p">}</span>
</pre></div>
</div>
</li>




<li>
<a id="org963cc0d"></a>@BeforeEach<br><div class="outline-text-6" id="text-org963cc0d">
<p>
Denotes that the annotated method should be executed before each
@Test, @RepeatedTest, @ParameterizedTest, or @TestFactory method in
the current class; analogous to JUnit 4’s @Before. Such methods are
inherited unless they are overridden. 
</p>
</div>
</li>

<li>
<a id="org18e82cd"></a>@AfterEach<br><div class="outline-text-6" id="text-org18e82cd">
<p>
Denotes that the annotated method should be executed after each @Test,
@RepeatedTest, @ParameterizedTest, or @TestFactory method in the
current class; analogous to JUnit 4’s @After. Such methods are
inherited unless they are overridden. 
</p>
</div>
</li>

<li>
<a id="orga3343b2"></a>@BeforeAll<br><div class="outline-text-6" id="text-orga3343b2">
<p>
Denotes that the annotated method should be executed before all @Test,
@RepeatedTest, @ParameterizedTest, and @TestFactory methods in the
current class; analogous to JUnit 4’s @BeforeClass. Such methods are
inherited (unless they are hidden or overridden) and must be static
(unless the "per-class" test instance lifecycle is used). 
</p>
</div>
</li>

<li>
<a id="org56f46e0"></a>@AfterAll<br><div class="outline-text-6" id="text-org56f46e0">
<p>
Denotes that the annotated method should be executed after all @Test,
@RepeatedTest, @ParameterizedTest, and @TestFactory methods in the
current class; analogous to JUnit 4’s @AfterClass. Such methods are
inherited (unless they are hidden or overridden) and must be static
(unless the "per-class" test instance lifecycle is used). 
</p>
</div>
</li>



<li>
<a id="org55860eb"></a>@Disabled<br><div class="outline-text-6" id="text-org55860eb">
<p>
Simple tag to disable a particular test.
</p>

<p>
Say for instance
</p>

<div class="highlight"><pre><span></span>      <span class="nd">@Disabled</span><span class="p">(</span><span class="s">"Disabled until bug #99 has been fixed"</span><span class="p">)</span>
</pre></div>

<p>
Note that there are some extensions in order to condtionally
disable. You can check at it online on the official
documentation. There you have the correct reference.                  
</p>
</div>
</li>

<li>
<a id="org07829ba"></a>@TestInstance<br><div class="outline-text-6" id="text-org07829ba">
<p>
Used to configure the test instance lifecycle for the annotated test
class. Such annotations are inherited.
</p>

<p>
This is more interesting for <code>integration</code> and <code>functional</code>
tests. Basically you can specify there the lifecycle of the
thing.
</p>

<p>
Study it later at a later time-point.
</p>
</div>
</li>
</ul>
</li>


<li>
<a id="orgd7eb0f5"></a><span class="todo TODO">TODO</span> check how to combine the annoations above into meta-annotations<br><div class="outline-text-5" id="text-orgd7eb0f5">
<p>
see chapter 2.1 in this sense. 
</p>
</div>
</li>
</ul>
</div>




<div id="outline-container-orgc33bca0" class="outline-4">
<h4 id="orgc33bca0">AssertionTypes</h4>
<div class="outline-text-4" id="text-orgc33bca0">
<p>
Check in the following all of the different types of possible
assertion methods - note again in junit package.
</p>

<p>
Note that should you want to start to go deeper into the topic
there is the following statement on the official documentation:
</p>

<blockquote>
<p>
There are times when more power and additional functionality such as
matchers are desired or required. In such cases, the JUnit team
recommends the use of third-party assertion libraries such as <code>AssertJ,
Hamcrest, Truth</code>, etc. Developers are therefore free to use the
assertion library of their choice. 
</p>
</blockquote>

<p>
Might want to check at these.
</p>

<p>
In any case coming back to our case, see the following script with
the possible assertions. I especially like the
<b>assertionTimeOut</b>. I never worked with it before but I can
already picture beautiful use-cases for it. Very neat.
</p>

<div class="highlight"><pre><span></span>    <span class="kn">import static</span> <span class="nn">java.time.Duration.ofMillis</span><span class="p">;</span>
    <span class="kn">import static</span> <span class="nn">java.time.Duration.ofMinutes</span><span class="p">;</span>
    <span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assertions.assertAll</span><span class="p">;</span>
    <span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assertions.assertEquals</span><span class="p">;</span>
    <span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assertions.assertNotNull</span><span class="p">;</span>
    <span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assertions.assertThrows</span><span class="p">;</span>
    <span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assertions.assertTimeout</span><span class="p">;</span>
    <span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assertions.assertTimeoutPreemptively</span><span class="p">;</span>
    <span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assertions.assertTrue</span><span class="p">;</span>

    <span class="kn">import</span> <span class="nn">java.util.concurrent.CountDownLatch</span><span class="p">;</span>

    <span class="kn">import</span> <span class="nn">example.domain.Person</span><span class="p">;</span>
    <span class="kn">import</span> <span class="nn">example.util.Calculator</span><span class="p">;</span>

    <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="p">;</span>

    <span class="kd">class</span> <span class="nc">AssertionsDemo</span> <span class="p">{</span>

	<span class="kd">private</span> <span class="kd">final</span> <span class="n">Calculator</span> <span class="n">calculator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Calculator</span><span class="p">();</span>

	<span class="kd">private</span> <span class="kd">final</span> <span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="p">(</span><span class="s">"Jane"</span><span class="p">,</span> <span class="s">"Doe"</span><span class="p">);</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">standardAssertions</span><span class="p">()</span> <span class="p">{</span>
	    <span class="n">assertEquals</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">calculator</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>

	    <span class="n">assertEquals</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">calculator</span><span class="p">.</span><span class="na">multiply</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
			 <span class="s">"The optional failure message is now the last parameter"</span><span class="p">);</span>


	    <span class="c1">// well the next point is a I wanna be thing. I don't think that compiling a string is such a big issue</span>
	    <span class="c1">// anyways see the point of lazy evaluation.</span>
	    <span class="n">assertTrue</span><span class="p">(</span><span class="sc">'a'</span> <span class="o">&lt;</span> <span class="sc">'b'</span><span class="p">,</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="s">"Assertion messages can be lazily evaluated -- "</span>
		       <span class="o">+</span> <span class="s">"to avoid constructing complex messages unnecessarily."</span><span class="p">);</span> 
	<span class="p">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">groupedAssertions</span><span class="p">()</span> <span class="p">{</span>
	    <span class="c1">// In a grouped assertion all assertions are executed, and all</span>
	    <span class="c1">// failures will be reported together.</span>
	    <span class="n">assertAll</span><span class="p">(</span><span class="s">"person"</span><span class="p">,</span>
		      <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">assertEquals</span><span class="p">(</span><span class="s">"Jane"</span><span class="p">,</span> <span class="n">person</span><span class="p">.</span><span class="na">getFirstName</span><span class="p">()),</span>
		      <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">assertEquals</span><span class="p">(</span><span class="s">"Doe"</span><span class="p">,</span> <span class="n">person</span><span class="p">.</span><span class="na">getLastName</span><span class="p">())</span>
		      <span class="p">);</span>
	<span class="p">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">dependentAssertions</span><span class="p">()</span> <span class="p">{</span>
	    <span class="c1">// Within a code block, if an assertion fails the</span>
	    <span class="c1">// subsequent code in the same block will be skipped.</span>
	    <span class="n">assertAll</span><span class="p">(</span><span class="s">"properties"</span><span class="p">,</span>
		      <span class="p">()</span> <span class="o">-&gt;</span> <span class="p">{</span>
			  <span class="n">String</span> <span class="n">firstName</span> <span class="o">=</span> <span class="n">person</span><span class="p">.</span><span class="na">getFirstName</span><span class="p">();</span>
			  <span class="n">assertNotNull</span><span class="p">(</span><span class="n">firstName</span><span class="p">);</span>

			  <span class="c1">// Executed only if the previous assertion is valid.</span>
			  <span class="n">assertAll</span><span class="p">(</span><span class="s">"first name"</span><span class="p">,</span>
				    <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">assertTrue</span><span class="p">(</span><span class="n">firstName</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">"J"</span><span class="p">)),</span>
				    <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">assertTrue</span><span class="p">(</span><span class="n">firstName</span><span class="p">.</span><span class="na">endsWith</span><span class="p">(</span><span class="s">"e"</span><span class="p">))</span>
				    <span class="p">);</span>
		      <span class="p">},</span>
		      <span class="p">()</span> <span class="o">-&gt;</span> <span class="p">{</span>
			  <span class="c1">// Grouped assertion, so processed independently</span>
			  <span class="c1">// of results of first name assertions.</span>
			  <span class="n">String</span> <span class="n">lastName</span> <span class="o">=</span> <span class="n">person</span><span class="p">.</span><span class="na">getLastName</span><span class="p">();</span>
			  <span class="n">assertNotNull</span><span class="p">(</span><span class="n">lastName</span><span class="p">);</span>

			  <span class="c1">// Executed only if the previous assertion is valid.</span>
			  <span class="n">assertAll</span><span class="p">(</span><span class="s">"last name"</span><span class="p">,</span>
				    <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">assertTrue</span><span class="p">(</span><span class="n">lastName</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">"D"</span><span class="p">)),</span>
				    <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">assertTrue</span><span class="p">(</span><span class="n">lastName</span><span class="p">.</span><span class="na">endsWith</span><span class="p">(</span><span class="s">"e"</span><span class="p">))</span>
				    <span class="p">);</span>
		      <span class="p">}</span>
		      <span class="p">);</span>
	<span class="p">}</span>

	<span class="c1">// so note the syntax of assertThrows:</span>
	<span class="c1">// first argument: exception that should result</span>
	<span class="c1">// second arg: the actual code that should throw the exception.</span>
	<span class="c1">// third arg: message   If the executable code does not throw</span>
	<span class="c1">//            any exception, this message will be printed along with FAIL result </span>
	<span class="c1">// so basically use it in order to see if you get the error as desired. </span>
	<span class="nd">@Test</span> 
	<span class="kt">void</span> <span class="nf">exceptionTesting</span><span class="p">()</span> <span class="p">{</span>
	    <span class="n">Exception</span> <span class="n">exception</span> <span class="o">=</span> <span class="n">assertThrows</span><span class="p">(</span><span class="n">ArithmeticException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="p">()</span> <span class="o">-&gt;</span>
					       <span class="n">calculator</span><span class="p">.</span><span class="na">divide</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span> 

	    <span class="n">assertEquals</span><span class="p">(</span><span class="s">"/ by zero"</span><span class="p">,</span> <span class="n">exception</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
	<span class="p">}</span>

	<span class="c1">// this is a very nice one.</span>
	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">timeoutNotExceeded</span><span class="p">()</span> <span class="p">{</span>
	    <span class="c1">// The following assertion succeeds.</span>
	    <span class="n">assertTimeout</span><span class="p">(</span><span class="n">ofMinutes</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="p">{</span>
		    <span class="c1">// Perform task that takes less than 2 minutes.</span>
		<span class="p">});</span>
	<span class="p">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">timeoutNotExceededWithResult</span><span class="p">()</span> <span class="p">{</span>
	    <span class="c1">// The following assertion succeeds, and returns the supplied object.</span>
	    <span class="n">String</span> <span class="n">actualResult</span> <span class="o">=</span> <span class="n">assertTimeout</span><span class="p">(</span><span class="n">ofMinutes</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="p">{</span>
		    <span class="k">return</span> <span class="s">"a result"</span><span class="p">;</span>
		<span class="p">});</span>
	    <span class="n">assertEquals</span><span class="p">(</span><span class="s">"a result"</span><span class="p">,</span> <span class="n">actualResult</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">timeoutNotExceededWithMethod</span><span class="p">()</span> <span class="p">{</span>
	    <span class="c1">// The following assertion invokes a method reference and returns an object.</span>
	    <span class="n">String</span> <span class="n">actualGreeting</span> <span class="o">=</span> <span class="n">assertTimeout</span><span class="p">(</span><span class="n">ofMinutes</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">AssertionsDemo</span><span class="p">::</span><span class="n">greeting</span><span class="p">);</span>
	    <span class="n">assertEquals</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">,</span> <span class="n">actualGreeting</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">timeoutExceeded</span><span class="p">()</span> <span class="p">{</span>
	    <span class="c1">// The following assertion fails with an error message similar to:</span>
	    <span class="c1">// execution exceeded timeout of 10 ms by 91 ms</span>
	    <span class="n">assertTimeout</span><span class="p">(</span><span class="n">ofMillis</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="p">{</span>
		    <span class="c1">// Simulate task that takes more than 10 ms.</span>
		    <span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
		<span class="p">});</span>
	<span class="p">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">timeoutExceededWithPreemptiveTermination</span><span class="p">()</span> <span class="p">{</span>
	    <span class="c1">// The following assertion fails with an error message similar to:</span>
	    <span class="c1">// execution timed out after 10 ms</span>
	    <span class="n">assertTimeoutPreemptively</span><span class="p">(</span><span class="n">ofMillis</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="p">{</span>
		    <span class="c1">// Simulate task that takes more than 10 ms.</span>
		    <span class="k">new</span> <span class="n">CountDownLatch</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="na">await</span><span class="p">();</span>
		<span class="p">});</span>
	<span class="p">}</span>

	<span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">greeting</span><span class="p">()</span> <span class="p">{</span>
	    <span class="k">return</span> <span class="s">"Hello, World!"</span><span class="p">;</span>
	<span class="p">}</span>

    <span class="p">}</span>
</pre></div>
</div>
</div>


<div id="outline-container-org0ee3d30" class="outline-4">
<h4 id="org0ee3d30">Assumptions</h4>
<div class="outline-text-4" id="text-org0ee3d30">
<p>
Ok… that is as well something I never came across
before. Interesting to know of its existence.
</p>

<p>
The idea is the following, if you include an <i>assumption</i>
statement in a test, if the assumption is met then you run the
rest of the test otherwise you will abort the test <b>without
throwing an error</b> for it.
</p>

<p>
It is essentially and if condition that has to hold in order to
run the test.
</p>

<p>
Then see the following two options
</p>

<div class="highlight"><pre><span></span>    <span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assertions.assertEquals</span><span class="p">;</span>
    <span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assumptions.assumeTrue</span><span class="p">;</span>
    <span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assumptions.assumingThat</span><span class="p">;</span>

    <span class="kn">import</span> <span class="nn">example.util.Calculator</span><span class="p">;</span>

    <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="p">;</span>

    <span class="kd">class</span> <span class="nc">AssumptionsDemo</span> <span class="p">{</span>

	<span class="kd">private</span> <span class="kd">final</span> <span class="n">Calculator</span> <span class="n">calculator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Calculator</span><span class="p">();</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">testOnlyOnCiServer</span><span class="p">()</span> <span class="p">{</span>
	    <span class="n">assumeTrue</span><span class="p">(</span><span class="s">"CI"</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">getenv</span><span class="p">(</span><span class="s">"ENV"</span><span class="p">)));</span>
	    <span class="c1">// remainder of test</span>
	<span class="p">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">testOnlyOnDeveloperWorkstation</span><span class="p">()</span> <span class="p">{</span>
	    <span class="n">assumeTrue</span><span class="p">(</span><span class="s">"DEV"</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">getenv</span><span class="p">(</span><span class="s">"ENV"</span><span class="p">)),</span>
		<span class="p">()</span> <span class="o">-&gt;</span> <span class="s">"Aborting test: not on developer workstation"</span><span class="p">);</span> <span class="c1">// with message</span>
	    <span class="c1">// remainder of test</span>
	<span class="p">}</span>

	<span class="c1">// note that you could do the above in two different tests but</span>
	<span class="c1">// good to know the compact option.</span>
	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">testInAllEnvironments</span><span class="p">()</span> <span class="p">{</span>
	    <span class="n">assumingThat</span><span class="p">(</span><span class="s">"CI"</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">getenv</span><span class="p">(</span><span class="s">"ENV"</span><span class="p">)),</span>
		<span class="p">()</span> <span class="o">-&gt;</span> <span class="p">{</span>
		    <span class="c1">// perform these assertions only on the CI server</span>
		    <span class="n">assertEquals</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">calculator</span><span class="p">.</span><span class="na">divide</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
		<span class="p">});</span>

	    <span class="c1">// perform these assertions in all environments</span>
	    <span class="n">assertEquals</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="n">calculator</span><span class="p">.</span><span class="na">multiply</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">));</span>
	<span class="p">}</span>

    <span class="p">}</span>
</pre></div>
</div>
</div>



<div id="outline-container-org7731e7f" class="outline-3">
<h3 id="org7731e7f">
<span class="todo TODO">TODO</span> Mockito</h3>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../front-end-stories/" rel="prev" title="Front-End Stories">Previous post</a>
            </li>
        </ul></nav></aside></article><footer id="footer"><p>Contents © 2022         <a href="mailto:marco.hassan30@gmail.com">Marco Hassan</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(2, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
