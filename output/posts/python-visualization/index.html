<!DOCTYPE html>
<html prefix="        og: http://ogp.me/ns# article: http://ogp.me/ns/article#     " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Python Visualization | Bits of Experience</title>
<link href="https://fonts.googleapis.com/css?family=Bitter:400,400i,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://marcohassan.github.io/bits-of-experience/posts/python-visualization/">
<!--[if lt IE 9]><script src="../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><meta name="author" content="Marco Hassan">
<link rel="prev" href="../useful-network-debugging-tools/" title="Useful Network debugging Tools" type="text/html">
<link rel="next" href="../accessing-protected-content-via-get-requests/" title="Accessing protected content via GET requests" type="text/html">
<meta property="og:site_name" content="Bits of Experience">
<meta property="og:title" content="Python Visualization">
<meta property="og:url" content="https://marcohassan.github.io/bits-of-experience/posts/python-visualization/">
<meta property="og:description" content="Here some python visualization dummy scripts are saved








Data

import matplotlib.pyplot as plt
%matplotlib inline 
%config InlineBackend.figure_format = 'png'
import numpy as np


N = 30
x_1 = n">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-03-19T14:02:40+02:00">
</head>
<body>
    <a href="#page-content" class="sr-only sr-only-focusable">Skip to main content</a>
    
    <section class="social"><ul>
<li><a href="../../pages/aboutme/" title="About me"><i class="fa fa-user-circle"></i></a></li>
            <li><a href="../../pages/bits-of-experience-a-readable-view-on-my-study-adventures/" title="Home"><i class="fa fa-home"></i></a></li>
            <li><a href="../../index.html" title="Blog"><i class="fa fa-edit"></i></a></li>
            <li><a href="../../categories/index.html" title="Tags"><i class="fa fa-tags"></i></a></li>
            <li><a href="../../pages/emacs/" title="A life Configuring Emacs"><i class="fa fa-code"></i></a></li>
            <li><a href="../../pages/papers/" title="Term and Research Papers"><i class="fa fa-university"></i></a></li>
            <li><a href="https://github.com/MarcoHassan" title="My Github"><i class="fab fa-github"></i></a></li>
            <li><a href="https://stackoverflow.com/users/9731177/mhass" title="My Stack"><i class="fab fa-stack-overflow"></i></a></li>
            <li><a href="../../rss.xml" title="RSS"><i class="fa fa-rss"></i></a></li>
    
    

        </ul></section><section class="page-content"><div class="content" rel="main">
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Python Visualization</a></h1>

        <div class="metadata">
            <p class="dateline"><a href="." rel="bookmark"><i class="fa fa-clock"></i> <time class="published dt-published" datetime="2020-03-19T14:02:40+02:00" itemprop="datePublished" title="2020-03-19 14:02">2020-03-19 14:02</time></a></p>
            <p class="byline author vcard"> <i class="fa fa-user"></i> <span class="byline-name fn" itemprop="author">
                    Marco Hassan
            </span></p>
            
        <p class="sourceline"><a href="index.org" class="sourcelink"><i class="fa fa-file-code"></i> Source</a></p>

            

            

        </div>
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>
Here some python visualization dummy scripts are saved
</p>

<!-- TEASER_END -->

<br><br><div id="outline-container-org6b154bf" class="outline-2">
<h2 id="org6b154bf">Data</h2>
<div class="outline-text-2" id="text-org6b154bf">
<div class="highlight"><pre><span></span>import matplotlib.pyplot as plt
%matplotlib inline 
%config InlineBackend.figure_format = 'png'
import numpy as np
</pre></div>

<div class="highlight"><pre><span></span>N = 30
x_1 = np.random.randn(N) * 3
x_2 = np.random.randn(N) * 3 + 2
x_3 = np.random.randn(N) * 3 + -2
</pre></div>
</div>
</div>

<div id="outline-container-org54da0f6" class="outline-2">
<h2 id="org54da0f6">Work with pandas</h2>
<div class="outline-text-2" id="text-org54da0f6">
<div class="highlight"><pre><span></span>import pandas as pd
</pre></div>

<ul class="org-ul">
<li>create data from numpy matrix</li>
</ul>
<div class="highlight"><pre><span></span>mydat = pd.DataFrame (np.matrix ([x_1,x_2,x_3]).transpose ())
</pre></div>

<ul class="org-ul">
<li>create data from two numpy arrays</li>
</ul>
<p>
here you need to flatten the arrays first
</p>

<div class="highlight"><pre><span></span>X = 2 * np.random.rand(100,1)
y = 4 +3 * X+np.random.randn(100,1)

mydat = pd.DataFrame ({'x':X.flatten(), 'y': y.flatten()})
</pre></div>

<ul class="org-ul">
<li>describe the data</li>
</ul>
<div class="highlight"><pre><span></span>mydat.describe ()
</pre></div>


<ul class="org-ul">
<li>Set the name of the columns</li>
</ul>
<div class="highlight"><pre><span></span>mydat.columns = ["nomean", "posmean", "negmean"]
</pre></div>

<div class="highlight"><pre><span></span>mydat.columns
</pre></div>

<div class="highlight"><pre><span></span>plt.plot(mydat.nomean, c = "lightblue", ls = '--', marker = "o",
	 ms = 6, label ="nomean")
plt.plot(mydat.posmean, c = "darkorange", ls = '--', marker = "s",
	 ms = 6, label ="posmean") # ms = marker size
plt.plot(mydat.negmean, c = "lightgreen", ls = '--', marker = "^",
	 ms = 6, label ="negmean")
plt.legend(loc = 'upper right',bbox_to_anchor = (1,1))
plt.xticks(list(range(20)), rotation = 'vertical') # sets the ticks on
						   # x-axis and puts
						   # them vertically.
</pre></div>


<ul class="org-ul">
<li>get the entry (x,y) in your relational table</li>
</ul>
<div class="highlight"><pre><span></span>mydat.head (5)
</pre></div>

<div class="highlight"><pre><span></span>mydat.iloc[2,1]
</pre></div>

<ul class="org-ul">
<li>slicing the data</li>
</ul>
<div class="highlight"><pre><span></span>mydat[0:4]
</pre></div>

<ul class="org-ul">
<li>get by column</li>
</ul>
<div class="highlight"><pre><span></span>mydat[['nomean', 'posmean']].head (3)
</pre></div>

<ul class="org-ul">
<li>get by row and column</li>
</ul>
<div class="highlight"><pre><span></span>mydat[['nomean', 'posmean']][::2]
</pre></div>

<div class="highlight"><pre><span></span>print(mydat[['nomean', 'posmean']].iloc [0,1])
</pre></div>

<ul class="org-ul">
<li>new column</li>
</ul>
<div class="highlight"><pre><span></span>mydat['sum'] = mydat['nomean'] + mydat['posmean'] + mydat['negmean']
</pre></div>

<div class="highlight"><pre><span></span>mydat.columns
</pre></div>

<div class="highlight"><pre><span></span>mydat2 = mydat
mydat.head ()
</pre></div>

<ul class="org-ul">
<li>drop a column</li>
</ul>
<div class="highlight"><pre><span></span>mydat2.drop ('sum', axis = 1).head ()
</pre></div>

<ul class="org-ul">
<li>filter through booleans</li>
</ul>
<div class="highlight"><pre><span></span>filt = mydat.nomean &lt; 0

print (mydat[['sum', 'negmean']][filt])
</pre></div>



<ul class="org-ul">
<li>remove duplicates</li>
</ul>
<div class="highlight"><pre><span></span>print (np.matrix ([[1,2,1],[3,3,3]]).transpose ())

pd.DataFrame (np.matrix ([[1,2,1],[3,3,3]]).transpose ()).iloc[:,1].unique ()
</pre></div>

<ul class="org-ul">
<li>on the difference between <code>.iloc</code> and <code>.loc</code>
</li>
</ul>
<p>
notice by the way that this are outdated. by now you should use <code>.iat</code>
and <code>.at</code>.
</p>

<p>
The difference is the following.
</p>

<p>
<code>.iat</code> : uses the strict position in the matrix
</p>

<p>
<code>.at</code> : search by index and column names
</p>


<div class="highlight"><pre><span></span>print (mydat)
mydat.at[0, 'negmean']
</pre></div>

<div class="highlight"><pre><span></span>mydat.iat[0,2]
</pre></div>

<p>
To further understand the thing consider
</p>

<div class="highlight"><pre><span></span>mydat2 = mydat[::2]
mydat2
</pre></div>

<div class="highlight"><pre><span></span>print (mydat2.at[6, 'nomean']) ## this by real index independent of the axis
print (mydat2.iat[6, 0]) ## this sixth row in the matrix
</pre></div>

<ul class="org-ul">
<li>categorical variables</li>
</ul>
<p>
This is important for treating them as dummies in regression as well
for facet<sub>wraps</sub>. 
</p>

<div class="highlight"><pre><span></span>mydat.head ()
</pre></div>


<div class="highlight"><pre><span></span>mydat["category"] = np.repeat (range (4), 5)
mydat.info ()
</pre></div>

<p>
To transform this into a category use
</p>

<div class="highlight"><pre><span></span>mydat.category = mydat.category.astype ('category')
mydat.info ()
</pre></div>


<p>
To view the category types
</p>

<div class="highlight"><pre><span></span>mydat.category.cat.categories
</pre></div>
</div>
</div>

<div id="outline-container-orgc2ff853" class="outline-2">
<h2 id="orgc2ff853">MatplotLib</h2>
<div class="outline-text-2" id="text-orgc2ff853">
<div class="highlight"><pre><span></span>plt.plot(x_1, c = "lightblue", ls = '--', marker = "o",
	 ms = 6, label ="nomean")
plt.plot(x_2, c = "darkorange", ls = '--', marker = "s",
	 ms = 6, label ="posmean") # ms = marker size
plt.plot(x_3, c = "lightgreen", ls = '--', marker = "^",
	 ms = 6, label ="negmean")
plt.legend(loc = 'upper right',bbox_to_anchor = (1,1))
plt.xticks(list(range(20)), rotation = 'vertical') # sets the ticks on
						   # x-axis and puts
						   # them vertically.
</pre></div>

<br><br><img width="100%" height="100%" src="../../images/ob-ein-e4d60f65359faf963dc9edc65a3851e0.png" class="center"><br><br><ul class="org-ul">
<li>stacked histograms via matplotlib</li>
</ul>
<div class="highlight"><pre><span></span>plt.hist([mydat[mydat.bitwise == True].nomean,
	  mydat[mydat.bitwise == False].posmean])
</pre></div>

<br><br><img width="100%" height="100%" src="../../images/ob-ein-4e5223a40dc5aad0bb91fba3fb97f4c6.png" class="center"><br><br><div class="highlight"><pre><span></span>plt.hist([mydat[mydat.bitwise == True].nomean,
	  mydat[mydat.bitwise == False].posmean],
	 stacked = True)
</pre></div>

<br><br><img width="100%" height="100%" src="../../images/ob-ein-a029aa36eeb77d6b33e123c2a7023261.png" class="center"><br><br>
</div>
</div>

<div id="outline-container-orgff9bc3a" class="outline-2">
<h2 id="orgff9bc3a">Seaborn</h2>
<div class="outline-text-2" id="text-orgff9bc3a">
<div class="highlight"><pre><span></span>import seaborn as sns
</pre></div>

<div class="highlight"><pre><span></span>sns.distplot (mydat['nomean'])
</pre></div>

<br><br><img width="100%" height="100%" src="../../images/ob-ein-6b9e2671be86b00c00b82558a0c879f3.png" class="center"><br><br><div class="highlight"><pre><span></span>mydat.head ()
</pre></div>

<div class="highlight"><pre><span></span>g = sns.lmplot(x="posmean", y="sum", data = mydat)
</pre></div>

<br><br><img width="100%" height="100%" src="../../images/ob-ein-fdb6afb1310d32cd9d7ab3e7504bdc14.png" class="center"><br><br><div class="highlight"><pre><span></span>import statsmodels
g = sns.lmplot(x="posmean", y="sum", col="bitwise", hue="bitwise", data=mydat,
	       y_jitter=.02,  truncate=False)
</pre></div>

<br><br><img width="100%" height="100%" src="../../images/ob-ein-bd913d592aa2ad7d32dda045f217c4b5.png" class="center"><br><br><p>
To further inspect different visualization techniques check at the
<a href="https://seaborn.pydata.org/examples/index.html">seaborn page</a>.
</p>


<div class="highlight"><pre><span></span>g = sns.lmplot(x="posmean", y="sum", data = mydat, 
	       hue = 'bitwise', fit_reg = False)
</pre></div>

<br><br><img width="100%" height="100%" src="../../images/ob-ein-ffa4f4a083eb7753d04349001d0af209.png" class="center"><br><br><ul class="org-ul">
<li>joinplot for inspecting the density of two functions</li>
</ul>
<div class="highlight"><pre><span></span>g = sns.jointplot (data = mydat, x = 'posmean', y = 'negmean')
</pre></div>

<div class="highlight"><pre><span></span>g = sns.jointplot (data = mydat, x = 'posmean', y = 'negmean', kind = 'hex')
</pre></div>

<div class="highlight"><pre><span></span>sns.jointplot (data = mydat, x = 'posmean', y = 'negmean'). \
    plot_joint(sns.kdeplot, zorder=3, n_levels=6) ## add isolines
</pre></div>

<br><br><img width="100%" height="100%" src="../../images/ob-ein-9fcf615aed09e4928c87ae2b4b547b4e.png" class="center"><br><br><ul class="org-ul">
<li>kdeplot without data</li>
</ul>
<div class="highlight"><pre><span></span>sns.kdeplot (mydat.posmean, mydat.nomean)
</pre></div>

<br><br><img width="100%" height="100%" src="../../images/ob-ein-c31fe9f7c879bc265853bd1dc9039845.png" class="center"><br><br><p>
To draw the isolines via colour scale use the shade bool
</p>

<div class="highlight"><pre><span></span>sns.kdeplot (mydat.posmean, mydat.nomean,
	     shade = True)
</pre></div>

<br><br><img width="100%" height="100%" src="../../images/ob-ein-2b28d7b239bb2b2c97d91ddec01caab4.png" class="center"><br><br><p>
To still see the grids
</p>

<div class="highlight"><pre><span></span>sns.kdeplot (mydat.posmean, mydat.nomean,
	     shade = True, shade_lowest = False)
</pre></div>

<br><br><img width="100%" height="100%" src="../../images/ob-ein-9a36b78d9df73e73b323e41e10582027.png" class="center"><br><br><ul class="org-ul">
<li>change the background style</li>
</ul>
<div class="highlight"><pre><span></span>sns.set(style="darkgrid")
sns.kdeplot (mydat.posmean, mydat.nomean)
</pre></div>

<br><br><img width="100%" height="100%" src="../../images/ob-ein-7ff3fea35de715f49145204980aeb263.png" class="center"><br><br><ul class="org-ul">
<li>create subplots</li>
</ul>
<div class="highlight"><pre><span></span>## specify your R par(mfrow=c(x,y))
f, axes = plt.subplots(1,2, figsize = (12, 6))
k1 = sns.kdeplot(mydat.posmean, mydat.nomean, ax = axes[0], cmap = 'Greens')
k2 = sns.kdeplot(mydat.posmean, mydat.negmean, ax = axes[1], cmap = 'Greens')
</pre></div>

<br><br><img width="100%" height="100%" src="../../images/ob-ein-76f47b1626f35945ac24a2fdb16cd94b.png" class="center"><br><br><p>
with more columns the axis index becomes more complex.
</p>

<div class="highlight"><pre><span></span>## specify your R par(mfrow=c(x,y))
f, axes = plt.subplots(2,2, figsize = (12, 6))
k1 = sns.kdeplot(mydat.posmean, mydat.nomean, ax = axes[0,1], cmap = 'Greens')
k2 = sns.kdeplot(mydat.posmean, mydat.negmean, ax = axes[1,0], cmap = 'Greens')
</pre></div>

<img width="100%" height="100%" src="../../images/ob-ein-67a82e7e06d0dbde403da30e12915fb0.png" class="center"><br><br><ul class="org-ul">
<li>violinplot</li>
</ul>
<p>
same information as boxplot. on top of it you have the width that
tells you how many datapoints falls into each level for each category
</p>

<div class="highlight"><pre><span></span>k1 = sns.violinplot(data = mydat, x = 'bitwise', y = 'nomean')
</pre></div>

<img width="100%" height="100%" src="../../images/ob-ein-76e27ae206053454189960ae1872c755.png" class="center"><br><br><ul class="org-ul">
<li>facet grids</li>
</ul>
<p>
this is useful when plotting many variables and inspecting their
properties for different categories.
</p>

<p>
you might do that as follows
</p>

<div class="highlight"><pre><span></span>## create some more categories
rand = np.random.randn(200)
category = ['2008' if x &gt; 0 else '2009' for x in rand]
mydat['year'] = pd.Series(category).astype('category')
category = ['posExtreme' if x &gt; 2 else 'normal' if x &lt; 2 else 'negExtreme' for x in rand]
mydat['extreme'] = pd.Series(category).astype('category')

mydat.info()
</pre></div>


<div class="highlight"><pre><span></span>set(['posExtreme' if x &gt; 2 else 'normal' if x &lt; -2 else 'negExtreme' for x in rand])
</pre></div>


<div class="highlight"><pre><span></span>g =  sns.FacetGrid(data = mydat, row = 'year', col = 'extreme', hue = 'year')
g.map(plt.scatter, x = 'nomean', y = 'posmean')
</pre></div>

<br><br><img width="100%" height="100%" src="../../images/ob-ein-0b867ca8bdca2f2900ea9cfed8557013.png" class="center">
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../useful-network-debugging-tools/" rel="prev" title="Useful Network debugging Tools">Previous post</a>
            </li>
            <li class="next">
                <a href="../accessing-protected-content-via-get-requests/" rel="next" title="Accessing protected content via GET requests">Next post</a>
            </li>
        </ul></nav></aside></article><footer id="footer"><p>Contents © 2020         <a href="mailto:marco.hassan30@gmail.com">Marco Hassan</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(2, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
