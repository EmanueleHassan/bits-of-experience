<!DOCTYPE html>
<html prefix="        og: http://ogp.me/ns# article: http://ogp.me/ns/article#     " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="A readable view on my studying adventures.">
<meta name="viewport" content="width=device-width">
<title>Bits of Experience</title>
<link href="https://fonts.googleapis.com/css?family=Bitter:400,400i,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="rss.xml">
<link rel="canonical" href="https://marcohassan.github.io/bits-of-experience/">
<link rel="next" href="index-3.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5shiv-printshiv.min.js"></script><![endif]--><link rel="prefetch" href="posts/slovak-learning/" type="text/html">
</head>
<body>
    <a href="#page-content" class="sr-only sr-only-focusable">Skip to main content</a>
    
    <section class="social"><ul>
<li><a href="pages/aboutme/" title="About me"><i class="fa fa-user-circle"></i></a></li>
            <li><a href="pages/bits-of-experience-a-readable-view-on-my-study-adventures/" title="Home"><i class="fa fa-home"></i></a></li>
            <li><a href="#" title="Blog"><i class="fa fa-edit"></i></a></li>
            <li><a href="categories/index.html" title="Tags"><i class="fa fa-tags"></i></a></li>
            <li><a href="pages/emacs/" title="A life Configuring Emacs"><i class="fa fa-code"></i></a></li>
            <li><a href="pages/papers/" title="Term and Research Papers"><i class="fa fa-university"></i></a></li>
            <li><a href="https://github.com/MarcoHassan" title="My Github"><i class="fab fa-github"></i></a></li>
            <li><a href="https://stackoverflow.com/users/9731177/mhass" title="My Stack"><i class="fab fa-stack-overflow"></i></a></li>
            <li><a href="rss.xml" title="RSS"><i class="fa fa-rss"></i></a></li>
    
    

        </ul></section><section class="page-content"><div class="content" rel="main">
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/slovak-learning/" class="u-url">Slovak Learning</a></h1>
        <div class="metadata">
            <p class="dateline"><a href="posts/slovak-learning/" rel="bookmark"><i class="fa fa-clock"></i> <time class="published dt-published" datetime="2020-05-16T09:45:34+02:00" title="2020-05-16 09:45">2020-05-16 09:45</time></a></p>
            <p class="byline author vcard"> <i class="fa fa-user"></i> <span class="byline-name fn" itemprop="author">
                Marco Hassan
            </span></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div>
<br><br><p>
Ok. This post is likely not interesting for any visitor. I am learning
the language and after a discussion with my girlfriend it turned out I
rather write down the new vocabulary for learning the language the
fastest.
</p>

<p>
In this post I write down my progress and I can go back to it at later
stages.
</p>

<p class="more"><a href="posts/slovak-learning/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/rdds-transformations-and-actions/" class="u-url">RDDs Transformations and Actions</a></h1>
        <div class="metadata">
            <p class="dateline"><a href="posts/rdds-transformations-and-actions/" rel="bookmark"><i class="fa fa-clock"></i> <time class="published dt-published" datetime="2020-05-03T15:51:24+02:00" title="2020-05-03 15:51">2020-05-03 15:51</time></a></p>
            <p class="byline author vcard"> <i class="fa fa-user"></i> <span class="byline-name fn" itemprop="author">
                Marco Hassan
            </span></p>
        </div>
    </header><div class="p-summary entry-summary">
    <br><br><p>
This post continues the discussion started a few times ago on <a href="https://marcohassan.github.io/bits-of-experience/posts/spark-session-initalization/">RDD and
Spark</a>.
</p>

<p>
I will try to go here in the lifecycle of an RDD and will present the
major Transformation and Actions functions. I will moreover touch on
the physical implementation of Spark as this will give you the mental
tools to properly understand how to properly structure your Spark
workflow in order to optimize the performance.   
</p>

<br><div id="outline-container-orga21e98b" class="outline-2">
<h2 id="orga21e98b">On RDDs</h2>
<div class="outline-text-2" id="text-orga21e98b">
<p>
A brief overview on RDDs was given in the previous post and you are
referred to it for a brief introduction.
</p>

<p>
RDDs are lazy. This, means that only if the data is needed for a
certain computation the data is read from the underlying storage
system.
</p>

<p>
An RDD in Spark is simply an immutable distributed collection of
objects. Each RDD can be split into multiple partitions, which may be
computed on different nodes of the cluster.
</p>

<p>
The typical RDD lifecycle is as follows:
</p>

<ul class="org-ul">
<li>An RDDs is first created from stable storage or by some Python objects.</li>
</ul>
<p>
RDDs offer then two types of operations: <b>transformations</b> and <b>actions</b>.
</p>

<ul class="org-ul">
<li>
<b>Transformations</b> create a new RDD from an existing one.
Transformations are lazy, meaning that no transformation is executed
until you execute an action.</li>

<li>
<b>Actions</b> compute a result based on an RDD, and either return it to
the driver program or save it to an external storage system (e.g.,
HDFS). This is the end of the lifecycle.</li>
</ul>
<p>
Transformations and actions are different because of the way Spark
computes RDDs. Although you can define new RDDs any time, Spark
computes them only in a <b>lazy</b> fashion, that is, the first time they
are used in an <b>action</b>.
</p>

<p>
For the creation of RDDs and the partitions of them please refer to
the previous post I will now briefly introduce the physical execution
of spark before illustrating some of the most the key transformations
and actions.
</p>

<br>
</div>
</div>


<div id="outline-container-orgbf524cc" class="outline-2">
<h2 id="orgbf524cc">
<span class="todo TODO">TODO</span> On the physical Execution</h2>
<div class="outline-text-2" id="text-orgbf524cc">
<br>
</div>
</div>


<div id="outline-container-orgc640147" class="outline-2">
<h2 id="orgc640147">Transformations</h2>
<div class="outline-text-2" id="text-orgc640147">
<p>
Following are examples of some of the common transformations
available.
</p>

<p>
For a detailed list, see <a href="https://spark.apache.org/docs/2.0.0/programming-guide.html#transformations">RDD Transformations</a>
</p>

<p>
Run some transformations below to understand this better.
</p>

<p>
<b>Note:</b> If some of the queries are taking too long to complete, try
restarting the kernel, and rerunning the cell <i>above</i>.
</p>


<div class="highlight"><pre><span></span>from pyspark.sql import SparkSession

spark = SparkSession \
    .builder \
    .master ("local[8]") \
    .appName("My first Spark Session") \
    .getOrCreate()

sc = spark.sparkContext
</pre></div>


<div class="highlight"><pre><span></span>fruits = sc.textFile('wasb:///example/data/fruits.txt')
</pre></div>


<div class="highlight"><pre><span></span>fruits.collect()
</pre></div>


<div class="highlight"><pre><span></span># map
fruitsReversed = fruits.map(lambda fruit: fruit[::-1]) ## the fruit[::-1] inverts the letters of the word

# Note: the `collect` command is NOT a Transformation, it is an Action
# used here for the purposes of showing the results! Just use it when
# you know that the action will be small enough to be handled by the
# memeory of the machine you are working on. Otherwise, no chance you
# will be able to display your results and you will better have to
# save the results on a HDFS cluster.
fruitsReversed.collect()
</pre></div>

<div class="highlight"><pre><span></span># filter
shortFruits = fruits.filter(lambda fruit: len(fruit) &lt;= 5)
shortFruits.collect()
</pre></div>

<div class="highlight"><pre><span></span># flatMap
characters = fruits.flatMap(lambda fruit: list(fruit))
characters.collect()
</pre></div>

<div class="highlight"><pre><span></span># union
fruitsAndYellowThings = fruits.union(yellowThings)
fruitsAndYellowThings.collect()
</pre></div>

<div class="highlight"><pre><span></span># intersection
yellowFruits = fruits.intersection(yellowThings)
yellowFruits.collect()
</pre></div>

<div class="highlight"><pre><span></span># distinct
distinctFruitsAndYellowThings = fruitsAndYellowThings.distinct()
distinctFruitsAndYellowThings.collect()
</pre></div>

<div class="highlight"><pre><span></span># groupByKey
yellowThingsByFirstLetter = yellowThings.map(lambda thing: (thing[0], thing)).groupByKey()
for letter, lst in yellowThingsByFirstLetter.collect():
	print("For letter", letter)
	for obj in lst:
		print(" &gt; ", obj)
</pre></div>

<div class="highlight"><pre><span></span># reduceByKey
numFruitsByLength = fruits.map(lambda fruit: (len(fruit), 1)).reduceByKey(lambda x, y: x + y)
numFruitsByLength.collect()
</pre></div>
</div>

<div id="outline-container-org06929f2" class="outline-4">
<h4 id="org06929f2">Some quick note on reduce and reduceByKey</h4>
<div class="outline-text-4" id="text-org06929f2">
<p>
The logic of the reduce function is as follows
</p>

<p>
<img src="images/Bildschirmfoto_2020-05-04_um_17.54.18.png" alt="nil"></p>

<div class="highlight"><pre><span></span>  input_list = sc.parallelize(range(5))
  sum_of_squares = input_list.map(lambda x: x ** 3).reduce(lambda x, y: x + y)

  print(sum_of_squares)
</pre></div>

<p>
It is now clear from the examples below that the lambda function of
the reduce by key function below takes as x the value of the key and
as y the second value of the key. This in analogy to the reduce key
above. It performs hence essentially the same function as the reduce
option for each individual key.
</p>

<div class="highlight"><pre><span></span>  fruits = sc.parallelize(["apple", "orange", "java", "call++"])

  ## Example 1 ##

  numFruitsByLength = fruits.map(lambda fruit: (len(fruit), 2))
  print(numFruitsByLength.collect())

  numFruitsByLength = numFruitsByLength.reduceByKey(lambda x, y: x + y)
  print(numFruitsByLength.collect())

  ## Example 2 ##

  numFruitsByLength = sc.parallelize([(5, 2), (6, 3), (4, 2), (6, 2)])
  print(numFruitsByLength.collect())

  numFruitsByLength = numFruitsByLength.reduceByKey(lambda x, y: x + y)
  print(numFruitsByLength.collect())
</pre></div>



<br>
</div>
</div>


<div id="outline-container-orgb5f1c1c" class="outline-4">
<h4 id="orgb5f1c1c">mapValues</h4>
<div class="outline-text-4" id="text-orgb5f1c1c">
<p>
How to interpret <code>mapValues</code>
</p>

<div class="highlight"><pre><span></span>print(test_entries.map(lambda x: (len(x["choices"]), x["choices"])).groupByKey().map(lambda x : (x[0], len(list(x[1])))).collect())

print(test_entries.map(lambda x: (len(x["choices"]), x["choices"])).groupByKey().mapValues(len).collect())
</pre></div>
</div>
</div>
</div>


<div id="outline-container-org5c349f6" class="outline-2">
<h2 id="org5c349f6">Actions</h2>
<div class="outline-text-2" id="text-org5c349f6">
</div>

<div id="outline-container-org8d01edd" class="outline-3">
<h3 id="org8d01edd">Aggregate</h3>
<div class="outline-text-3" id="text-org8d01edd">
<p>
<a href="https://stackoverflow.com/questions/28240706/explain-the-aggregate-functionality-in-spark/38949457">Explaination of Aggregate</a>
</p>

<div class="highlight"><pre><span></span>    seqOp = (lambda local_result, list_element: (local_result[0] + list_element, local_result[1] + 1) )
    combOp = (lambda some_local_result, another_local_result: (some_local_result[0] + another_local_result[0], some_local_result[1] + another_local_result[1]) )

    sc.parallelize([1, 2, 1, 2]).aggregate((0, 0), seqOp, combOp)
</pre></div>
</div>
</div>
</div>





<div id="outline-container-org8ee7a4e" class="outline-2">
<h2 id="org8ee7a4e">Literature</h2>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-verify-your-github-page-with-brave-rewards/" class="u-url">On The Brave Browser</a></h1>
        <div class="metadata">
            <p class="dateline"><a href="posts/how-to-verify-your-github-page-with-brave-rewards/" rel="bookmark"><i class="fa fa-clock"></i> <time class="published dt-published" datetime="2020-05-02T19:05:36+02:00" title="2020-05-02 19:05">2020-05-02 19:05</time></a></p>
            <p class="byline author vcard"> <i class="fa fa-user"></i> <span class="byline-name fn" itemprop="author">
                Marco Hassan
            </span></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div>
<p>
So I recently started to work with the Brave browser. I started to see
it on a LinkIn cryptocurrency influencer webpage and I was rather
suspicious. I noticed it but I did not further investigate. I just had
integrated <code>DuckDuckGo</code> into my Chrome browser and I was feeling ok
with that at the time.
</p>

<p>
I started to get quite interested in it when I saw that the Prof. of
Communication Networks of the University I am currently visiting was
using it. He, as an expert using the browser. There must be some
goodness in it.
</p>

<p class="more"><a href="posts/how-to-verify-your-github-page-with-brave-rewards/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/remotely-login-ssh-key/" class="u-url">Remotely Login - SSH Key</a></h1>
        <div class="metadata">
            <p class="dateline"><a href="posts/remotely-login-ssh-key/" rel="bookmark"><i class="fa fa-clock"></i> <time class="published dt-published" datetime="2020-05-01T11:32:46+02:00" title="2020-05-01 11:32">2020-05-01 11:32</time></a></p>
            <p class="byline author vcard"> <i class="fa fa-user"></i> <span class="byline-name fn" itemprop="author">
                Marco Hassan
            </span></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div>
<br><br><p>
This posts outlines the way to save ssh into a virtual machine using a
generated <code>SSH-key</code>. It is very much in the spirit of the ssh keys
registration for github, for which you are referred to <a href="https://marcohassan.github.io/bits-of-experience/posts/Multiple%20SSH%20Keys%20for%20different%20accounts%20on%20a%20single%20machine/">this post</a>.
</p>

<p class="more"><a href="posts/remotely-login-ssh-key/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/when-creating-a-home_made-ml-model/" class="u-url">When creating a home-made ML model</a></h1>
        <div class="metadata">
            <p class="dateline"><a href="posts/when-creating-a-home_made-ml-model/" rel="bookmark"><i class="fa fa-clock"></i> <time class="published dt-published" datetime="2020-04-22T15:34:50+02:00" title="2020-04-22 15:34">2020-04-22 15:34</time></a></p>
            <p class="byline author vcard"> <i class="fa fa-user"></i> <span class="byline-name fn" itemprop="author">
                Marco Hassan
            </span></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div>
<p>
In this post I go over some beginner mistake and set up the workflow for
further works that involve some custom-created ML model.
</p>

<p class="more"><a href="posts/when-creating-a-home_made-ml-model/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/embedding-watson-assistant-into-a-client-webpage/" class="u-url">Embedding Watson Assistant into a Client Webpage</a></h1>
        <div class="metadata">
            <p class="dateline"><a href="posts/embedding-watson-assistant-into-a-client-webpage/" rel="bookmark"><i class="fa fa-clock"></i> <time class="published dt-published" datetime="2020-04-16T14:47:05+02:00" title="2020-04-16 14:47">2020-04-16 14:47</time></a></p>
            <p class="byline author vcard"> <i class="fa fa-user"></i> <span class="byline-name fn" itemprop="author">
                Marco Hassan
            </span></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div>
<br><p>
This demo introduce the necessary steps in order to create an
intelligent Watson Chatbot and deploy it in your/your client website.
</p>

<p class="more"><a href="posts/embedding-watson-assistant-into-a-client-webpage/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/nikola-set-up-do-it-the-simple-way/" class="u-url">Nikola Set Up - Do it the Simple Way.</a></h1>
        <div class="metadata">
            <p class="dateline"><a href="posts/nikola-set-up-do-it-the-simple-way/" rel="bookmark"><i class="fa fa-clock"></i> <time class="published dt-published" datetime="2020-04-12T21:45:52+02:00" title="2020-04-12 21:45">2020-04-12 21:45</time></a></p>
            <p class="byline author vcard"> <i class="fa fa-user"></i> <span class="byline-name fn" itemprop="author">
                Marco Hassan
            </span></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div>
<p>
Nikola is a python package to automatically generate static
webpages. This is more secure than operating through dynamic websites
for non-expert users. Moreover the integration with org will allow you
to easily generate blogs based on your org documents and this will
prove to be especially useful given that you can work following your
literate programming workflow without bothering too much on the
format.
</p>

<p>
You can finally generate and publish interesting discoveries in an
instantaneous way.
</p>

<p class="more"><a href="posts/nikola-set-up-do-it-the-simple-way/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/wsgi-apache-and-nginx/" class="u-url">WSGI, APACHE and NGINX</a></h1>
        <div class="metadata">
            <p class="dateline"><a href="posts/wsgi-apache-and-nginx/" rel="bookmark"><i class="fa fa-clock"></i> <time class="published dt-published" datetime="2020-03-31T17:51:00+02:00" title="2020-03-31 17:51">2020-03-31 17:51</time></a></p>
            <p class="byline author vcard"> <i class="fa fa-user"></i> <span class="byline-name fn" itemprop="author">
                Marco Hassan
            </span></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div>
<p>
This posts contain a brief overview of the deployment options for
Python applications. It will give a brief overview on the different
web servers types and the necessity for utilizing a WSGI server when
deploying a Python application.
</p>

<p class="more"><a href="posts/wsgi-apache-and-nginx/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/uml-diagrams-with-plantuml/" class="u-url">UML Diagrams with PlantUML</a></h1>
        <div class="metadata">
            <p class="dateline"><a href="posts/uml-diagrams-with-plantuml/" rel="bookmark"><i class="fa fa-clock"></i> <time class="published dt-published" datetime="2020-03-25T11:14:12+01:00" title="2020-03-25 11:14">2020-03-25 11:14</time></a></p>
            <p class="byline author vcard"> <i class="fa fa-user"></i> <span class="byline-name fn" itemprop="author">
                Marco Hassan
            </span></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div>
<br><br><p>
For my first bigger project I had to construct a flow diagram
describing the architecture of a back-end model analytics model I am
working on. 
</p>

<p>
This post briefly discuss on UML and gives the set-up of <code>Plantuml</code> on
emacs. 
</p>

<p class="more"><a href="posts/uml-diagrams-with-plantuml/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/accessing-protected-content-via-get-requests/" class="u-url">Accessing protected content via GET requests</a></h1>
        <div class="metadata">
            <p class="dateline"><a href="posts/accessing-protected-content-via-get-requests/" rel="bookmark"><i class="fa fa-clock"></i> <time class="published dt-published" datetime="2020-03-21T08:34:45+01:00" title="2020-03-21 08:34">2020-03-21 08:34</time></a></p>
            <p class="byline author vcard"> <i class="fa fa-user"></i> <span class="byline-name fn" itemprop="author">
                Marco Hassan
            </span></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div>
<br><br><p>
Sometimes when I want to make notes I prefer to download an html file,
transform it to an <code>.org</code> file via <code>pandoc</code> and to edit and make notes
in org mode. 
</p>

<p>
Nonetheless if the technique works fine for non-protected HTML pages,
sometimes you are required to pass some authorization variables to
access a page. This post outline my solution to deal with the latter case.
</p>

<p class="more"><a href="posts/accessing-protected-content-via-get-requests/">Read more…</a></p>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="index-3.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'center', // Change this to 'left' if you want left-aligned equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script><footer id="footer"><p>Contents © 2020         <a href="mailto:marco.hassan30@gmail.com">Marco Hassan</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(2, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
