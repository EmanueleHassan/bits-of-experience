<br>
<br>


<p>
This post briefly introduce the creation of a virtual environment and
the initiation of a kernel active on that virtual environment. 
</p>

<p>
Finally it discusses how to connect to the kernel running given its
ports specifications.
</p>

<!-- TEASER_END -->

<br>

<div id="outline-container-org3fcc1c1" class="outline-2">
<h2 id="org3fcc1c1">Virtual Environment Set Up</h2>
<div class="outline-text-2" id="text-org3fcc1c1">
<p>
Once you installed the virtualenvironment package, either leveraging
python package manager, homebrew or whatever, you should install
jupyter in the virtual environment.
</p>

<div class="highlight"><pre><span></span>   <span class="o">(</span>virtualenv<span class="o">)</span> $ pip3 install jupyter
</pre></div>

<p>
It is then possible to instantiate a kernel in the virtual environment
by running.
</p>

<div class="highlight"><pre><span></span>   <span class="o">(</span>virtualenv<span class="o">)</span> $ jupyter kernel
</pre></div>

<p>
A kernel will be created and you can finally connect to it given its
ports specifications that you can find in the <code>.json</code> of the kernel of
interest.
</p>

<p>
You can find your specified kernels under:
</p>

<div class="highlight"><pre><span></span>   jupyter --runtime
</pre></div>

<pre class="example">
/Users/marcohassan/Library/Jupyter/runtime
</pre>


<p>
The typical information there are as follows:
</p>

<div class="highlight"><pre><span></span>   cat /Users/marcohassan/Library/Jupyter/runtime/kernel-25378.json
</pre></div>

<pre class="example" id="org1d4c314">
{
  "shell_port": 49354,
  "iopub_port": 49357,
  "stdin_port": 49355,
  "control_port": 49356,
  "hb_port": 49359,
  "ip": "127.0.0.1",
  "key": "xxx",
  "transport": "tcp",
  "signature_scheme": "hmac-sha256",
  "kernel_name": ""
}
</pre>

<p>
This kernel will contain the libraries installed in your virtual
environment.
</p>

<p>
Moreover you can use the specifications above for connecting to a
kernel running on a different machine provided that you can ssh
into it.
</p>
</div>
</div>

<div id="outline-container-org59dccef" class="outline-2">
<h2 id="org59dccef">Restarting your kernel</h2>
<div class="outline-text-2" id="text-org59dccef">
<p>
Once you closed your kernel there is no need to start a new
one. One per virtual environment is enough. 
</p>

<p>
You can restart the session specific kernel by running
</p>

<div class="highlight"><pre><span></span>   <span class="o">(</span>virtualenv<span class="o">)</span> $ ipython kernel -f &lt;kernel-name&gt;.json
</pre></div>

<p>
You can then connect to it in ob-ipython in the usual way and edit
everything in emacs in <code>orgmode</code>.
</p>
</div>
</div>


<div id="outline-container-org02f2115" class="outline-2">
<h2 id="org02f2115">Integration Ein-python</h2>
<div class="outline-text-2" id="text-org02f2115">
<p>
Notice that you can also integrate the emacs jupyter notebook
front-end with ipython where you work directly on the kernel.
</p>

<p>
You can simply get the kernel of your notebook started by the
<code>ein-run-notebook</code> by searching it in
/Users/marcohassan/Library/Jupyter/runtime.
</p>

<p>
You can find the last opened kernel by running <code>!ls -lt $(jupyter --runtime)</code>
</p>

<p>
And passing this as the <code>:session</code> parameter of your ipython cells.
</p>
</div>
</div>
