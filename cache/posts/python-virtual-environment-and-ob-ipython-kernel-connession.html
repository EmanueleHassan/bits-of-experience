<br>
<br>


<p>
This post briefly introduce the creation of a virtual environment and
the initiation of a kernel active on that virtual environment. 
</p>

<p>
Finally it discusses how to connect to the kernel running given its
ports specifications.
</p>

<!-- TEASER_END -->

<br>

<div id="outline-container-orga19520a" class="outline-2">
<h2 id="orga19520a">Virtual Environment Set Up</h2>
<div class="outline-text-2" id="text-orga19520a">
<p>
Once you installed the virtualenvironment package, either leveraging
python package manager, homebrew or whatever, you should install
jupyter in the virtual environment.
</p>

<div class="highlight"><pre><span></span><span class="w">   </span><span class="o">(</span>virtualenv<span class="o">)</span><span class="w"> </span>$<span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span>jupyter
</pre></div>

<p>
It is then possible to instantiate a kernel in the virtual environment
by running.
</p>

<div class="highlight"><pre><span></span><span class="w">   </span><span class="o">(</span>virtualenv<span class="o">)</span><span class="w"> </span>$<span class="w"> </span>jupyter<span class="w"> </span>kernel
</pre></div>

<p>
A kernel will be created and you can finally connect to it given its
ports specifications that you can find in the <code>.json</code> of the kernel of
interest.
</p>

<p>
You can find your specified kernels under:
</p>

<div class="highlight"><pre><span></span><span class="w">   </span>jupyter<span class="w"> </span>--runtime
</pre></div>

<pre class="example">
/Users/marcohassan/Library/Jupyter/runtime
</pre>


<p>
The typical information there are as follows:
</p>

<div class="highlight"><pre><span></span><span class="w">   </span>cat<span class="w"> </span>/Users/marcohassan/Library/Jupyter/runtime/kernel-25378.json
</pre></div>

<pre class="example">
{
  "shell_port": 49354,
  "iopub_port": 49357,
  "stdin_port": 49355,
  "control_port": 49356,
  "hb_port": 49359,
  "ip": "127.0.0.1",
  "key": "xxx",
  "transport": "tcp",
  "signature_scheme": "hmac-sha256",
  "kernel_name": ""
}
</pre>

<p>
This kernel will contain the libraries installed in your virtual
environment.
</p>

<p>
Moreover you can use the specifications above for connecting to a
kernel running on a different machine provided that you can ssh
into it.
</p>
</div>
</div>

<div id="outline-container-orgbee5c7a" class="outline-2">
<h2 id="orgbee5c7a">Restarting your kernel</h2>
<div class="outline-text-2" id="text-orgbee5c7a">
<p>
Once you closed your kernel there is no need to start a new
one. One per virtual environment is enough. 
</p>

<p>
You can restart the session specific kernel by running
</p>

<div class="highlight"><pre><span></span><span class="w">   </span><span class="o">(</span>virtualenv<span class="o">)</span><span class="w"> </span>$<span class="w"> </span>ipython<span class="w"> </span>kernel<span class="w"> </span>-f<span class="w"> </span>&lt;kernel-name&gt;.json
</pre></div>

<p>
You can then connect to it in ob-ipython in the usual way and edit
everything in emacs in <code>orgmode</code>.
</p>
</div>
</div>


<div id="outline-container-orge9f14bc" class="outline-2">
<h2 id="orge9f14bc">Integration Ein-python</h2>
<div class="outline-text-2" id="text-orge9f14bc">
<p>
Notice that you can also integrate the emacs jupyter notebook
front-end with ipython where you work directly on the kernel.
</p>

<p>
You can simply get the kernel of your notebook started by the
<code>ein-run-notebook</code> by searching it in
/Users/marcohassan/Library/Jupyter/runtime.
</p>

<p>
You can find the last opened kernel by running <code>!ls -lt $(jupyter --runtime)</code>
</p>

<p>
And passing this as the <code>:session</code> parameter of your ipython cells.
</p>
</div>
</div>
