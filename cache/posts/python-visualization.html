<p>
Here some python visualization dummy scripts are saved
</p>

<!-- TEASER_END -->

<br>
<br>

<div id="outline-container-org6b154bf" class="outline-2">
<h2 id="org6b154bf">Data</h2>
<div class="outline-text-2" id="text-org6b154bf">
<div class="highlight"><pre><span></span>import matplotlib.pyplot as plt
%matplotlib inline 
%config InlineBackend.figure_format = &#39;png&#39;
import numpy as np
</pre></div>

<div class="highlight"><pre><span></span>N = 30
x_1 = np.random.randn(N) * 3
x_2 = np.random.randn(N) * 3 + 2
x_3 = np.random.randn(N) * 3 + -2
</pre></div>
</div>
</div>

<div id="outline-container-org54da0f6" class="outline-2">
<h2 id="org54da0f6">Work with pandas</h2>
<div class="outline-text-2" id="text-org54da0f6">
<div class="highlight"><pre><span></span>import pandas as pd
</pre></div>

<ul class="org-ul">
<li>create data from numpy matrix</li>
</ul>

<div class="highlight"><pre><span></span>mydat = pd.DataFrame (np.matrix ([x_1,x_2,x_3]).transpose ())
</pre></div>

<ul class="org-ul">
<li>create data from two numpy arrays</li>
</ul>

<p>
here you need to flatten the arrays first
</p>

<div class="highlight"><pre><span></span>X = 2 * np.random.rand(100,1)
y = 4 +3 * X+np.random.randn(100,1)

mydat = pd.DataFrame ({&#39;x&#39;:X.flatten(), &#39;y&#39;: y.flatten()})
</pre></div>

<ul class="org-ul">
<li>describe the data</li>
</ul>

<div class="highlight"><pre><span></span>mydat.describe ()
</pre></div>


<ul class="org-ul">
<li>Set the name of the columns</li>
</ul>

<div class="highlight"><pre><span></span>mydat.columns = [&quot;nomean&quot;, &quot;posmean&quot;, &quot;negmean&quot;]
</pre></div>

<div class="highlight"><pre><span></span>mydat.columns
</pre></div>

<div class="highlight"><pre><span></span>plt.plot(mydat.nomean, c = &quot;lightblue&quot;, ls = &#39;--&#39;, marker = &quot;o&quot;,
	 ms = 6, label =&quot;nomean&quot;)
plt.plot(mydat.posmean, c = &quot;darkorange&quot;, ls = &#39;--&#39;, marker = &quot;s&quot;,
	 ms = 6, label =&quot;posmean&quot;) # ms = marker size
plt.plot(mydat.negmean, c = &quot;lightgreen&quot;, ls = &#39;--&#39;, marker = &quot;^&quot;,
	 ms = 6, label =&quot;negmean&quot;)
plt.legend(loc = &#39;upper right&#39;,bbox_to_anchor = (1,1))
plt.xticks(list(range(20)), rotation = &#39;vertical&#39;) # sets the ticks on
						   # x-axis and puts
						   # them vertically.
</pre></div>


<ul class="org-ul">
<li>get the entry (x,y) in your relational table</li>
</ul>

<div class="highlight"><pre><span></span>mydat.head (5)
</pre></div>

<div class="highlight"><pre><span></span>mydat.iloc[2,1]
</pre></div>

<ul class="org-ul">
<li>slicing the data</li>
</ul>

<div class="highlight"><pre><span></span>mydat[0:4]
</pre></div>

<ul class="org-ul">
<li>get by column</li>
</ul>

<div class="highlight"><pre><span></span>mydat[[&#39;nomean&#39;, &#39;posmean&#39;]].head (3)
</pre></div>

<ul class="org-ul">
<li>get by row and column</li>
</ul>

<div class="highlight"><pre><span></span>mydat[[&#39;nomean&#39;, &#39;posmean&#39;]][::2]
</pre></div>

<div class="highlight"><pre><span></span>print(mydat[[&#39;nomean&#39;, &#39;posmean&#39;]].iloc [0,1])
</pre></div>

<ul class="org-ul">
<li>new column</li>
</ul>

<div class="highlight"><pre><span></span>mydat[&#39;sum&#39;] = mydat[&#39;nomean&#39;] + mydat[&#39;posmean&#39;] + mydat[&#39;negmean&#39;]
</pre></div>

<div class="highlight"><pre><span></span>mydat.columns
</pre></div>

<div class="highlight"><pre><span></span>mydat2 = mydat
mydat.head ()
</pre></div>

<ul class="org-ul">
<li>drop a column</li>
</ul>

<div class="highlight"><pre><span></span>mydat2.drop (&#39;sum&#39;, axis = 1).head ()
</pre></div>

<ul class="org-ul">
<li>filter through booleans</li>
</ul>

<div class="highlight"><pre><span></span>filt = mydat.nomean &lt; 0

print (mydat[[&#39;sum&#39;, &#39;negmean&#39;]][filt])
</pre></div>



<ul class="org-ul">
<li>remove duplicates</li>
</ul>

<div class="highlight"><pre><span></span>print (np.matrix ([[1,2,1],[3,3,3]]).transpose ())

pd.DataFrame (np.matrix ([[1,2,1],[3,3,3]]).transpose ()).iloc[:,1].unique ()
</pre></div>

<ul class="org-ul">
<li>on the difference between <code>.iloc</code> and <code>.loc</code></li>
</ul>

<p>
notice by the way that this are outdated. by now you should use <code>.iat</code>
and <code>.at</code>.
</p>

<p>
The difference is the following.
</p>

<p>
<code>.iat</code> : uses the strict position in the matrix
</p>

<p>
<code>.at</code> : search by index and column names
</p>


<div class="highlight"><pre><span></span>print (mydat)
mydat.at[0, &#39;negmean&#39;]
</pre></div>

<div class="highlight"><pre><span></span>mydat.iat[0,2]
</pre></div>

<p>
To further understand the thing consider
</p>

<div class="highlight"><pre><span></span>mydat2 = mydat[::2]
mydat2
</pre></div>

<div class="highlight"><pre><span></span>print (mydat2.at[6, &#39;nomean&#39;]) ## this by real index independent of the axis
print (mydat2.iat[6, 0]) ## this sixth row in the matrix
</pre></div>

<ul class="org-ul">
<li>categorical variables</li>
</ul>

<p>
This is important for treating them as dummies in regression as well
for facet<sub>wraps</sub>. 
</p>

<div class="highlight"><pre><span></span>mydat.head ()
</pre></div>


<div class="highlight"><pre><span></span>mydat[&quot;category&quot;] = np.repeat (range (4), 5)
mydat.info ()
</pre></div>

<p>
To transform this into a category use
</p>

<div class="highlight"><pre><span></span>mydat.category = mydat.category.astype (&#39;category&#39;)
mydat.info ()
</pre></div>


<p>
To view the category types
</p>

<div class="highlight"><pre><span></span>mydat.category.cat.categories
</pre></div>
</div>
</div>

<div id="outline-container-orgc2ff853" class="outline-2">
<h2 id="orgc2ff853">MatplotLib</h2>
<div class="outline-text-2" id="text-orgc2ff853">
<div class="highlight"><pre><span></span>plt.plot(x_1, c = &quot;lightblue&quot;, ls = &#39;--&#39;, marker = &quot;o&quot;,
	 ms = 6, label =&quot;nomean&quot;)
plt.plot(x_2, c = &quot;darkorange&quot;, ls = &#39;--&#39;, marker = &quot;s&quot;,
	 ms = 6, label =&quot;posmean&quot;) # ms = marker size
plt.plot(x_3, c = &quot;lightgreen&quot;, ls = &#39;--&#39;, marker = &quot;^&quot;,
	 ms = 6, label =&quot;negmean&quot;)
plt.legend(loc = &#39;upper right&#39;,bbox_to_anchor = (1,1))
plt.xticks(list(range(20)), rotation = &#39;vertical&#39;) # sets the ticks on
						   # x-axis and puts
						   # them vertically.
</pre></div>

<br>
<br>

<img width="100%" height="100%" src="../../images/ob-ein-e4d60f65359faf963dc9edc65a3851e0.png" class="center">

<br>
<br>

<ul class="org-ul">
<li>stacked histograms via matplotlib</li>
</ul>

<div class="highlight"><pre><span></span>plt.hist([mydat[mydat.bitwise == True].nomean,
	  mydat[mydat.bitwise == False].posmean])
</pre></div>

<br>
<br>

<img width="100%" height="100%" src="../../images/ob-ein-4e5223a40dc5aad0bb91fba3fb97f4c6.png" class="center">

<br>
<br>

<div class="highlight"><pre><span></span>plt.hist([mydat[mydat.bitwise == True].nomean,
	  mydat[mydat.bitwise == False].posmean],
	 stacked = True)
</pre></div>

<br>
<br>

<img width="100%" height="100%" src="../../images/ob-ein-a029aa36eeb77d6b33e123c2a7023261.png" class="center">

<br>
<br>
</div>
</div>

<div id="outline-container-orgff9bc3a" class="outline-2">
<h2 id="orgff9bc3a">Seaborn</h2>
<div class="outline-text-2" id="text-orgff9bc3a">
<div class="highlight"><pre><span></span>import seaborn as sns
</pre></div>

<div class="highlight"><pre><span></span>sns.distplot (mydat[&#39;nomean&#39;])
</pre></div>

<br>
<br>

<img width="100%" height="100%" src="../../images/ob-ein-6b9e2671be86b00c00b82558a0c879f3.png" class="center">

<br>
<br>

<div class="highlight"><pre><span></span>mydat.head ()
</pre></div>

<div class="highlight"><pre><span></span>g = sns.lmplot(x=&quot;posmean&quot;, y=&quot;sum&quot;, data = mydat)
</pre></div>

<br>
<br>

<img width="100%" height="100%" src="../../images/ob-ein-fdb6afb1310d32cd9d7ab3e7504bdc14.png" class="center">

<br>
<br>

<div class="highlight"><pre><span></span>import statsmodels
g = sns.lmplot(x=&quot;posmean&quot;, y=&quot;sum&quot;, col=&quot;bitwise&quot;, hue=&quot;bitwise&quot;, data=mydat,
	       y_jitter=.02,  truncate=False)
</pre></div>

<br>
<br>

<img width="100%" height="100%" src="../../images/ob-ein-bd913d592aa2ad7d32dda045f217c4b5.png" class="center">

<br>
<br>

<p>
To further inspect different visualization techniques check at the
<a href="https://seaborn.pydata.org/examples/index.html">seaborn page</a>.
</p>


<div class="highlight"><pre><span></span>g = sns.lmplot(x=&quot;posmean&quot;, y=&quot;sum&quot;, data = mydat, 
	       hue = &#39;bitwise&#39;, fit_reg = False)
</pre></div>

<br>
<br>

<img width="100%" height="100%" src="../../images/ob-ein-ffa4f4a083eb7753d04349001d0af209.png" class="center">

<br>
<br>


<ul class="org-ul">
<li>joinplot for inspecting the density of two functions</li>
</ul>


<div class="highlight"><pre><span></span>g = sns.jointplot (data = mydat, x = &#39;posmean&#39;, y = &#39;negmean&#39;)
</pre></div>

<div class="highlight"><pre><span></span>g = sns.jointplot (data = mydat, x = &#39;posmean&#39;, y = &#39;negmean&#39;, kind = &#39;hex&#39;)
</pre></div>

<div class="highlight"><pre><span></span>sns.jointplot (data = mydat, x = &#39;posmean&#39;, y = &#39;negmean&#39;). \
    plot_joint(sns.kdeplot, zorder=3, n_levels=6) ## add isolines
</pre></div>

<br>
<br>

<img width="100%" height="100%" src="../../images/ob-ein-9fcf615aed09e4928c87ae2b4b547b4e.png" class="center">

<br>
<br>

<ul class="org-ul">
<li>kdeplot without data</li>
</ul>

<div class="highlight"><pre><span></span>sns.kdeplot (mydat.posmean, mydat.nomean)
</pre></div>

<br>
<br>

<img width="100%" height="100%" src="../../images/ob-ein-c31fe9f7c879bc265853bd1dc9039845.png" class="center">

<br>
<br>

<p>
To draw the isolines via colour scale use the shade bool
</p>

<div class="highlight"><pre><span></span>sns.kdeplot (mydat.posmean, mydat.nomean,
	     shade = True)
</pre></div>

<br>
<br>

<img width="100%" height="100%" src="../../images/ob-ein-2b28d7b239bb2b2c97d91ddec01caab4.png" class="center">

<br>
<br>

<p>
To still see the grids
</p>

<div class="highlight"><pre><span></span>sns.kdeplot (mydat.posmean, mydat.nomean,
	     shade = True, shade_lowest = False)
</pre></div>

<br>
<br>

<img width="100%" height="100%" src="../../images/ob-ein-9a36b78d9df73e73b323e41e10582027.png" class="center">

<br>
<br>

<ul class="org-ul">
<li>change the background style</li>
</ul>

<div class="highlight"><pre><span></span>sns.set(style=&quot;darkgrid&quot;)
sns.kdeplot (mydat.posmean, mydat.nomean)
</pre></div>

<br>
<br>

<img width="100%" height="100%" src="../../images/ob-ein-7ff3fea35de715f49145204980aeb263.png" class="center">

<br>
<br>

<ul class="org-ul">
<li>create subplots</li>
</ul>

<div class="highlight"><pre><span></span>## specify your R par(mfrow=c(x,y))
f, axes = plt.subplots(1,2, figsize = (12, 6))
k1 = sns.kdeplot(mydat.posmean, mydat.nomean, ax = axes[0], cmap = &#39;Greens&#39;)
k2 = sns.kdeplot(mydat.posmean, mydat.negmean, ax = axes[1], cmap = &#39;Greens&#39;)
</pre></div>

<br>
<br>

<img width="100%" height="100%" src="../../images/ob-ein-76f47b1626f35945ac24a2fdb16cd94b.png" class="center">

<br>
<br>

<p>
with more columns the axis index becomes more complex.
</p>

<div class="highlight"><pre><span></span>## specify your R par(mfrow=c(x,y))
f, axes = plt.subplots(2,2, figsize = (12, 6))
k1 = sns.kdeplot(mydat.posmean, mydat.nomean, ax = axes[0,1], cmap = &#39;Greens&#39;)
k2 = sns.kdeplot(mydat.posmean, mydat.negmean, ax = axes[1,0], cmap = &#39;Greens&#39;)
</pre></div>

<img width="100%" height="100%" src="../../images/ob-ein-67a82e7e06d0dbde403da30e12915fb0.png" class="center">

<br>
<br>

<ul class="org-ul">
<li>violinplot</li>
</ul>

<p>
same information as boxplot. on top of it you have the width that
tells you how many datapoints falls into each level for each category
</p>

<div class="highlight"><pre><span></span>k1 = sns.violinplot(data = mydat, x = &#39;bitwise&#39;, y = &#39;nomean&#39;)
</pre></div>

<img width="100%" height="100%" src="../../images/ob-ein-76e27ae206053454189960ae1872c755.png" class="center">

<br>
<br>

<ul class="org-ul">
<li>facet grids</li>
</ul>

<p>
this is useful when plotting many variables and inspecting their
properties for different categories.
</p>

<p>
you might do that as follows
</p>

<div class="highlight"><pre><span></span>## create some more categories
rand = np.random.randn(200)
category = [&#39;2008&#39; if x &gt; 0 else &#39;2009&#39; for x in rand]
mydat[&#39;year&#39;] = pd.Series(category).astype(&#39;category&#39;)
category = [&#39;posExtreme&#39; if x &gt; 2 else &#39;normal&#39; if x &lt; 2 else &#39;negExtreme&#39; for x in rand]
mydat[&#39;extreme&#39;] = pd.Series(category).astype(&#39;category&#39;)

mydat.info()
</pre></div>


<div class="highlight"><pre><span></span>set([&#39;posExtreme&#39; if x &gt; 2 else &#39;normal&#39; if x &lt; -2 else &#39;negExtreme&#39; for x in rand])
</pre></div>


<div class="highlight"><pre><span></span>g =  sns.FacetGrid(data = mydat, row = &#39;year&#39;, col = &#39;extreme&#39;, hue = &#39;year&#39;)
g.map(plt.scatter, x = &#39;nomean&#39;, y = &#39;posmean&#39;)
</pre></div>

<br>
<br>

<img width="100%" height="100%" src="../../images/ob-ein-0b867ca8bdca2f2900ea9cfed8557013.png" class="center">
</div>
</div>
