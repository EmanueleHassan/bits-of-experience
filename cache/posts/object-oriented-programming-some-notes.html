<p>
So here are some notes on concepts you have to use when working in a
proper OOP way.
</p>

<p>
Once upon a time, I had written some notes about major OOP
concepts. Unfortunately it got lost. Learn your lesson from it as this
is a real pity.
</p>

<p>
In any case start anew here. Basically this should cover a little bit
of Software Design best practices. Add some notes for instance through
the following sources
</p>

<ul class="org-ul">
<li><a href="https://refactoring.guru/design-patterns">design-patterns and refactoring</a> - online source.</li>

<li><a href="http://www.javier8a.com/itc/bd1/articulo.pdf">desing patterns</a> - apparently <i>THE BOOK</i> in order to write proper
software .</li>
</ul>

<!-- TEASER_END -->

<div id="outline-container-orgfcd5cb4" class="outline-2">
<h2 id="orgfcd5cb4">Callback Methods</h2>
<div class="outline-text-2" id="text-orgfcd5cb4">
<p>
So the basic idea is to create an interface with the methods that
the callback will leverage.
</p>

<p>
Then basically depedning on the object that will implement that
intereface you will fallback to different implementations of it.
</p>

<p>
Check as well at this event. <a href="https://www.tutorialspoint.com/Callback-using-Interfaces-in-Java">Equally good - if not better</a>. 
</p>

<p>
Say for instance the following
</p>

<div class="highlight"><pre><span></span>  <span class="c1">// Java program to demonstrate callback mechanism</span>
  <span class="c1">// using interface is Java</span>

  <span class="c1">// Create interface</span>
  <span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="p">;</span>
  <span class="kd">interface</span> <span class="nc">STax</span> <span class="p">{</span>
      <span class="kt">double</span> <span class="nf">stateTax</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="c1">// Implementation class of Punjab state tax</span>
  <span class="kd">class</span> <span class="nc">Punjab</span> <span class="kd">implements</span> <span class="n">STax</span> <span class="p">{</span>
      <span class="kd">public</span> <span class="kt">double</span> <span class="nf">stateTax</span><span class="p">()</span>
      <span class="p">{</span>
	  <span class="k">return</span> <span class="mf">3000.0</span><span class="p">;</span>
      <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// Implementation class of Himachal Pardesh state tax</span>
  <span class="kd">class</span> <span class="nc">HP</span> <span class="kd">implements</span> <span class="n">STax</span> <span class="p">{</span>
      <span class="kd">public</span> <span class="kt">double</span> <span class="nf">stateTax</span><span class="p">()</span>
      <span class="p">{</span>
	  <span class="k">return</span> <span class="mf">1000.0</span><span class="p">;</span>
      <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">class</span> <span class="nc">TAX</span> <span class="p">{</span>
      <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span>
	  <span class="kd">throws</span> <span class="n">ClassNotFoundException</span><span class="p">,</span> <span class="n">IllegalAccessException</span><span class="p">,</span> <span class="n">InstantiationException</span>
      <span class="p">{</span>
	  <span class="n">Scanner</span> <span class="n">sc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">in</span><span class="p">);</span>
	  <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Enter the state name&quot;</span><span class="p">);</span>
	  <span class="n">String</span> <span class="n">state</span> <span class="o">=</span> <span class="n">sc</span><span class="p">.</span><span class="na">next</span><span class="p">();</span> <span class="c1">// name of the state</span>

	  <span class="c1">// The state name is then stored in an object c</span>
	  <span class="n">Class</span> <span class="n">c</span> <span class="o">=</span> <span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="n">state</span><span class="p">);</span>

	  <span class="c1">// Create the new object of the class whose name is in  c</span>
	  <span class="c1">// Stax interface reference is now referencing that new object</span>
	  <span class="n">STax</span> <span class="n">ref</span> <span class="o">=</span> <span class="p">(</span><span class="n">STax</span><span class="p">)</span><span class="n">c</span><span class="p">.</span><span class="na">newInstance</span><span class="p">();</span>

	  <span class="cm">/*Call the method to calculate total tax</span>
<span class="cm">	    and pass interface reference - this is callback .</span>
<span class="cm">	    Here, ref may refer to stateTax() of Punjab or HP classes</span>
<span class="cm">	    depending on the class for which the object is created</span>
<span class="cm">	    in the previous step</span>
<span class="cm">	  */</span>

	  <span class="n">calculateTax</span><span class="p">(</span><span class="n">ref</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="kd">static</span> <span class="kt">void</span> <span class="nf">calculateTax</span><span class="p">(</span><span class="n">STax</span> <span class="n">t</span><span class="p">)</span>
      <span class="p">{</span>
	  <span class="c1">// calculate central tax</span>
	  <span class="kt">double</span> <span class="n">ct</span> <span class="o">=</span> <span class="mf">2000.0</span><span class="p">;</span>

	  <span class="c1">// calculate state tax</span>
	  <span class="kt">double</span> <span class="n">st</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="na">stateTax</span><span class="p">();</span>
	  <span class="kt">double</span> <span class="n">totaltax</span> <span class="o">=</span> <span class="n">st</span> <span class="o">+</span> <span class="n">ct</span><span class="p">;</span>

	  <span class="c1">// display total tax</span>
	  <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Total tax =&quot;</span> <span class="o">+</span> <span class="n">totaltax</span><span class="p">);</span>
      <span class="p">}</span>
  <span class="p">}</span>
</pre></div>

<p>
Note that in your code - for instance in the case of the zipParser
you use this concept coupled with the one of functional
programming.
</p>

<p>
I.e. your callback interface is implemented directly via functional
programming and it is never explicitely written anywehere.
</p>
</div>
</div>

<div id="outline-container-orga73263a" class="outline-2">
<h2 id="orga73263a">Factory Methods</h2>
<div class="outline-text-2" id="text-orga73263a">
<p>
Basically this is the one I was already noting when making some
notes generally about Java.
</p>

<p>
This is very core in order to write a bit of solid code. You have to
understand and interiorize it.
</p>

<p>
Basically the idea is the following:
</p>

<ul class="org-ul">
<li>Define an interface for creating an object, but let subclasses
decide which class to instantiate. Factory Method lets a class
defer instantiation to subclasses.</li>

<li>So that is basically a <i>virtual</i> constructor.</li>
</ul>


<p>
So the idea is essentailly the following:
</p>

<img src="../../images/Screenshot 2022-01-28 122956.png" class="center">

<p>
This was essentially the note that you made when writing your notes
about java.
</p>

<p>
See now how everything fits in this factory methods picture and good
to have it here in order to have a minimum order and reference it in
a faster way.
</p>

<p>
You see see in this sense how you start to extract important info
from that file and refactor them.
</p>
</div>

<div id="outline-container-orgcf214a8" class="outline-4">
<h4 id="orgcf214a8">On reference variables using interafaces&#xa0;&#xa0;&#xa0;<span class="tag"><span class="reference_variable">reference_variable</span></span></h4>
<div class="outline-text-4" id="text-orgcf214a8">
<p>
This is convenient. Recall that it was possible to define
reference variables as superclasses and to reference then objects
of subclasses. It was then possible to call the different abstract
methods of the superclass that would then trigger the right call
to the actual implementation of it in the subclass.
</p>

<p>
In a similar way it is possible to create reference variables as
interfaces and point then to the different objects of classes
implementing such interface.
</p>

<p>
<b>Any instance of any class that implements the declared interface
can be referred to by such a variable</b>.
</p>

<p>
The exact way the interface is implemented depends then on the
type of object that the reference interface variable points
at. This in a very similar way to what was already explained for
the case of superclass reference variable.
</p>

<p>
<b>Note:</b> interestingly when you implement a reference variable of
type interface and then refer to an object of some class referring
to that interface you can access all of the methods specified by
the interface via the reference variable but <b>you cannot access
any other members defined in the class</b> implementing the
interface.
</p>

<p>
The method to be executed is looked up dynamically at run time,
allowing classes to be created later than the code which calls
methods on them.
</p>

<p>
    #+begin<sub>quote</sub>
CAUTION Because dynamic lookup of a method at run time incurs a
significant overhead when compared with the normal method invocation
in Java, you should be careful not to use interfaces casually in
performance-critical code.
</p>
</div>
</div>
</div>


<div id="outline-container-org2aeb6e8" class="outline-2">
<h2 id="org2aeb6e8">Anonymous Inner Classes</h2>
<div class="outline-text-2" id="text-org2aeb6e8">
<p>
This is something quite interesting.
</p>

<p>
Anonymous classes are <i>inner classes with no name</i>.
</p>

<p>
Since they have no name, we can't use them in order to create
instances of anonymous classes.
</p>

<p>
As a result, we have to <b>declare and instantiate anonymous classes in
a single expression at the point of use</b>. -&gt; so essentially this is
ultimately the idea.
</p>

<p>
The way you declare this anonymous inner class with no name is the
following:
</p>

<blockquote>
<p>
new ParentClass (&#x2026;) {}
</p>

<p>
where:
</p>

<ul class="org-ul">
<li>ParentClass the class you want to create the inner class in</li>

<li>(&#x2026;) here you have to pass the constructor arguments. Note that
this is <i>necessary</i> as you are creating a new object out of the
box.</li>

<li>{} here you have the methods your anonymous class should implement</li>
</ul>
</blockquote>

<p>
Example
</p>

<div class="highlight"><pre><span></span>  <span class="c1">// Anonymous class - no name.</span>
  <span class="c1">// It basically is an inner class of the parentclass: Book</span>
  <span class="n">myNewObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Book</span><span class="p">(</span><span class="s">&quot;Design Patterns&quot;</span><span class="p">)</span> <span class="c1">// constructors arguments of parent class</span>
  <span class="p">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="n">String</span> <span class="nf">description</span><span class="p">()</span> <span class="p">{</span>   <span class="c1">// inner class with this method</span>
	  <span class="k">return</span> <span class="s">&quot;Famous GoF book.&quot;</span><span class="p">;</span>
      <span class="p">}</span>
  <span class="p">}</span>
</pre></div>

<p>
Note that this is essentially it. The question is then why it is an
<i>inner</i> class? Not that clear to me at this stage. I think that the
naming is a bit confusing.
</p>

<p>
Check at the following minor test that I did. You can in fact as
well access the methods of the parent class. So it looks to me
simply as an extended class object. So don't know keep it as an open
question and do not spend too much time on it now&#x2026; too many things
to learn. 
</p>

<div class="highlight"><pre><span></span>  <span class="kd">class</span> <span class="nc">Person</span><span class="p">{</span>
      <span class="kt">void</span> <span class="nf">eat</span><span class="p">(){};</span>

      <span class="kt">void</span> <span class="nf">helloWorld</span> <span class="p">(){</span>
	  <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="s">&quot;hello world&quot;</span><span class="p">);</span>
      <span class="p">};</span>
  <span class="p">}</span>

  <span class="kd">class</span> <span class="nc">TestAnnonymousInner</span><span class="p">{</span>
      <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[]</span><span class="p">){</span>
	  <span class="n">Person</span> <span class="n">p</span><span class="o">=</span><span class="k">new</span> <span class="n">Person</span><span class="p">(){</span>

		  <span class="nd">@Override</span>
		  <span class="kt">void</span> <span class="nf">eat</span><span class="p">(){</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;nice fruits&quot;</span><span class="p">);}</span>
	      <span class="p">};</span>

	  <span class="n">p</span><span class="p">.</span><span class="na">eat</span><span class="p">();</span>
	  <span class="n">p</span><span class="p">.</span><span class="na">helloWorld</span> <span class="p">();</span>
      <span class="p">}</span>
  <span class="p">}</span>
</pre></div>

<p>
<b>Finally note</b>: that it is very common as well to use the <i>abstract
inner class</i> patterns as well for interfaces. You can use this as
well there.
</p>
</div>
</div>

<div id="outline-container-org62223d3" class="outline-2">
<h2 id="org62223d3">Polymorphism</h2>
<div class="outline-text-2" id="text-org62223d3">
<p>
Overridden methods are another way that Java implements the “one
interface, multiple methods” aspect of polymorphism.
</p>

<p>
Part of the key to successfully applying polymorphism is understanding
that the superclasses and subclasses form a hierarchy which moves from
lesser to greater specialization.  Used correctly, the superclass
provides all elements that a subclass can use directly. It also
defines those methods that the derived class must implement on its
own. This allows the subclass the flexibility to define its own
methods, yet still enforces a consistent interface.
</p>
</div>
</div>
