<p>
So nice, there is a bit of a PoC now to break the monoliths apart and
start to work more in a cloud native way.
</p>

<p>
There are a couple of questions you will need to fix in order to
create the general structure of the PoC - the first one being how to
treat asynchronity in your architecture. The second one being how to
keep track of the state of the applicaiton.
</p>

<p>
This is a <a href="https://thenewstack.io/the-state-of-state-in-cloud-native-applications/">major question</a> in the cloud-native app development
paradigma. You can summarize the issue as following:
</p>

<ul class="org-ul">
<li>you want your apps to be stateless such that it is easy to scale and
heal (recover) them.</li>

<li>you need to keep track of some states in your overall logic.</li>
</ul>

<p>
Note now that you have to create a suitable architecture that makes
the both objectives possible.
</p>

<!-- TEASER_END -->

<div id="outline-container-org649599e" class="outline-2">
<h2 id="org649599e">Monolith way of doing the thing</h2>
<div class="outline-text-2" id="text-org649599e">
<p>
Create a big fat DB holding the state.
</p>

<p>
DBA resposible for it.
</p>
</div>
</div>

<div id="outline-container-org2d99ec7" class="outline-2">
<h2 id="org2d99ec7">Cloud Native Way of doing it</h2>
<div class="outline-text-2" id="text-org2d99ec7">
<p>
You can still keep a DB with the state. But I would guess this is
not the most clean way of working.
</p>

<p>
I would rather go with some event-based state solution as mentioned
<a href="https://www.lightbend.com/blog/design-techniques-stateful-cloud-native-applications-resilience-recoverability-scalability">here</a>.
</p>

<p>
At the end the idea is the one of actors performing the tasks -
state is managed by <a href="https://en.wikipedia.org/wiki/Actor_model">actors</a>. Each actor holds one state.
</p>

<p>
You have event logs such that you can replay the history in case of
failures. 
</p>

<p>
So basically this is a formalization of what you already had in
mind.
</p>

<p>
It is actully fun how many of these patterns comes out of the box
as possible solution.
</p>
</div>
</div>

<div id="outline-container-org5701627" class="outline-2">
<h2 id="org5701627">Recall as well the issue of compensating transactions</h2>
<div class="outline-text-2" id="text-org5701627">
<p>
Always keep <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/compensating-transaction">this</a> in the back of your mind when developing in such a
way.
</p>

<p>
I.e. always ask yourself is a compensating-transaction needed?
</p>

<p>
How to I keep track of the necessary compensating transactions. 
</p>
</div>
</div>
